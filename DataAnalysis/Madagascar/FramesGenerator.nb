(* Content-type: application/vnd.wolfram.mathematica *)

(*** Wolfram Notebook File ***)
(* http://www.wolfram.com/nb *)

(* CreatedBy='Mathematica 11.1' *)

(*CacheID: 234*)
(* Internal cache information:
NotebookFileLineBreakTest
NotebookFileLineBreakTest
NotebookDataPosition[       158,          7]
NotebookDataLength[    105637,       2608]
NotebookOptionsPosition[    102792,       2528]
NotebookOutlinePosition[    103178,       2545]
CellTagsIndexPosition[    103135,       2542]
WindowFrame->Normal*)

(* Beginning of Notebook Content *)
Notebook[{

Cell[CellGroupData[{
Cell["Network Map Animation Routines", "Title",
 CellChangeTimes->{{3.711972549137986*^9, 3.711972559684214*^9}, 
   3.72841750724235*^9},ExpressionUUID->"2ff85094-177f-4203-aeef-\
ae3a7082f034"],

Cell[CellGroupData[{

Cell["Functions", "Chapter",
 CellChangeTimes->{{3.71205745505372*^9, 3.7120574595945044`*^9}, {
   3.728567273851347*^9, 3.728567295416803*^9}, 
   3.7286746260100727`*^9},ExpressionUUID->"245eba7d-e03d-4aa2-a830-\
5a1f00392c1f"],

Cell[BoxData[{
 RowBox[{"<<", "PajaroLocoPublic`"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"SetDirectory", "[", 
   RowBox[{"NotebookDirectory", "[", "]"}], "]"}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"ImportAndReshapeMosquitoDatasets", "[", 
   RowBox[{"dataPath_", ",", 
    RowBox[{"{", 
     RowBox[{"maleFilenamePattern_", ",", "femaleFilenamePattern_"}], "}"}]}],
    "]"}], ":=", 
  RowBox[{"Module", "[", 
   RowBox[{
    RowBox[{"{", 
     RowBox[{
     "names", ",", "dataSets", ",", "maleFilenames", ",", "femaleFilenames", 
      ",", "maleDatasets", ",", "femaleDatasets", ",", "genotypes", ",", 
      "ticksMax", ",", "maleMax", ",", "femaleMax"}], "}"}], ",", 
    "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{"maleFilenames", "=", 
      RowBox[{
       RowBox[{"FileNames", "[", 
        RowBox[{
         RowBox[{"maleFilenamePattern", "<>", "\"\<_*.csv\>\""}], ",", 
         "dataPath"}], "]"}], "//", "Sort"}]}], ";", "\[IndentingNewLine]", 
     RowBox[{"femaleFilenames", "=", 
      RowBox[{
       RowBox[{"FileNames", "[", 
        RowBox[{
         RowBox[{"femaleFilenamePattern", "<>", "\"\<_Aggregate*.csv\>\""}], 
         ",", "dataPath"}], "]"}], "//", "Sort"}]}], ";", 
     "\[IndentingNewLine]", 
     RowBox[{"maleDatasets", "=", 
      RowBox[{"AddTotalPopulationToDataset", "[", 
       RowBox[{"Map", "[", 
        RowBox[{
         RowBox[{
          RowBox[{
           RowBox[{"Import", "[", "#", "]"}], "[", 
           RowBox[{"[", 
            RowBox[{
             RowBox[{"2", ";;", "All"}], ",", 
             RowBox[{"3", ";;", "All"}]}], "]"}], "]"}], "&"}], ",", 
         "maleFilenames"}], "]"}], "]"}]}], ";", "\[IndentingNewLine]", 
     RowBox[{"femaleDatasets", "=", 
      RowBox[{"AddTotalPopulationToDataset", "[", 
       RowBox[{"Map", "[", 
        RowBox[{
         RowBox[{
          RowBox[{
           RowBox[{"Import", "[", "#", "]"}], "[", 
           RowBox[{"[", 
            RowBox[{
             RowBox[{"2", ";;", "All"}], ",", 
             RowBox[{"3", ";;", "All"}]}], "]"}], "]"}], "&"}], ",", 
         "maleFilenames"}], "]"}], "]"}]}], ";", "\[IndentingNewLine]", 
     RowBox[{"genotypes", "=", 
      RowBox[{
       RowBox[{"Import", "[", 
        RowBox[{"maleFilenames", "[", 
         RowBox[{"[", "1", "]"}], "]"}], "]"}], "[", 
       RowBox[{"[", 
        RowBox[{"1", ",", 
         RowBox[{"3", ";;", "All"}]}], "]"}], "]"}]}], ";", 
     "\[IndentingNewLine]", 
     RowBox[{"ticksMax", "=", 
      RowBox[{"Length", "[", 
       RowBox[{"maleDatasets", "[", 
        RowBox[{"[", "1", "]"}], "]"}], "]"}]}], ";", "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{"{", 
       RowBox[{"maleMax", ",", "femaleMax"}], "}"}], "=", 
      RowBox[{"{", 
       RowBox[{
        RowBox[{
         RowBox[{"Flatten", "[", "maleDatasets", "]"}], "//", "Max"}], ",", 
        RowBox[{
         RowBox[{"Flatten", "[", "femaleDatasets", "]"}], "//", "Max"}]}], 
       "}"}]}], ";", "\[IndentingNewLine]", 
     RowBox[{"(*", "Output", "*)"}], "\[IndentingNewLine]", 
     RowBox[{"{", "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{"{", 
        RowBox[{"maleDatasets", ",", "femaleDatasets"}], "}"}], ",", 
       "\[IndentingNewLine]", 
       RowBox[{"{", 
        RowBox[{"genotypes", ",", "ticksMax", ",", 
         RowBox[{"{", 
          RowBox[{"maleMax", ",", "femaleMax"}], "}"}]}], "}"}]}], 
      "\[IndentingNewLine]", "}"}]}]}], "\[IndentingNewLine]", 
   "]"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"GenerateColorPalette", "[", 
   RowBox[{"genotypes_", ",", "colorScheme_"}], "]"}], ":=", 
  RowBox[{"Module", "[", 
   RowBox[{
    RowBox[{"{", 
     RowBox[{"steps", ",", "colors"}], "}"}], ",", "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{"steps", "=", 
      RowBox[{
       RowBox[{"(", 
        RowBox[{"genotypes", "//", "Length"}], ")"}], "-", "1"}]}], ";", 
     "\[IndentingNewLine]", 
     RowBox[{"colors", "=", 
      RowBox[{
       RowBox[{"{", 
        RowBox[{
         RowBox[{
          RowBox[{
           RowBox[{"ColorData", "[", 
            RowBox[{"colorScheme", ",", "#"}], "]"}], "&"}], "/@", 
          RowBox[{"Range", "[", 
           RowBox[{"0", ",", "1", ",", 
            RowBox[{"1", "/", "steps"}]}], "]"}]}], ",", "Black"}], "}"}], "//",
        "Flatten"}]}], ";", "\[IndentingNewLine]", 
     RowBox[{"{", 
      RowBox[{
       RowBox[{"Append", "[", 
        RowBox[{"genotypes", ",", "\"\<Total\>\""}], "]"}], ",", "colors"}], 
      "}"}]}]}], "\[IndentingNewLine]", "]"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"ImportGeoCoordinatesAndKernel", "[", 
   RowBox[{"coordinatesFilePath_", ",", "kernelFilePath_"}], "]"}], ":=", 
  RowBox[{"Module", "[", 
   RowBox[{
    RowBox[{"{", 
     RowBox[{"cities", ",", "transitionsMatrix"}], "}"}], ",", 
    "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{"cities", "=", 
      RowBox[{
       RowBox[{
        RowBox[{"{", 
         RowBox[{
          RowBox[{"#", "[", 
           RowBox[{"[", "1", "]"}], "]"}], ",", 
          RowBox[{"{", 
           RowBox[{
            RowBox[{"#", "[", 
             RowBox[{"[", "2", "]"}], "]"}], ",", 
            RowBox[{"#", "[", 
             RowBox[{"[", "3", "]"}], "]"}]}], "}"}], ",", 
          RowBox[{"#", "[", 
           RowBox[{"[", "4", "]"}], "]"}]}], "}"}], "&"}], "/@", 
       RowBox[{"Import", "[", "coordinatesFilePath", "]"}]}]}], ";", 
     "\[IndentingNewLine]", 
     RowBox[{"transitionsMatrix", "=", 
      RowBox[{
       RowBox[{"Import", "[", "kernelFilePath", "]"}], "[", 
       RowBox[{"[", 
        RowBox[{"2", ";;", "All"}], "]"}], "]"}]}], ";", 
     "\[IndentingNewLine]", 
     RowBox[{"{", 
      RowBox[{"cities", ",", "transitionsMatrix"}], "}"}]}]}], 
   "\[IndentingNewLine]", "]"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"AddTotalPopulationToDataset", "[", "dataset_", "]"}], ":=", 
  RowBox[{"Table", "[", 
   RowBox[{
    RowBox[{
     RowBox[{
      RowBox[{"Append", "[", 
       RowBox[{"#", ",", 
        RowBox[{"Total", "[", "#", "]"}]}], "]"}], "&"}], "/@", 
     RowBox[{"dataset", "[", 
      RowBox[{"[", "i", "]"}], "]"}]}], ",", 
    RowBox[{"{", 
     RowBox[{"i", ",", "1", ",", 
      RowBox[{"Length", "[", "dataset", "]"}]}], "}"}]}], 
   "]"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"AggregatePopulationByGenotypeIndices", "[", 
   RowBox[{"populationDatasets_", ",", "genotypesIndicesToAggregate_"}], 
   "]"}], ":=", 
  RowBox[{"Module", "[", 
   RowBox[{
    RowBox[{"{", 
     RowBox[{"popsDatasets", ",", "geneLabels"}], "}"}], ",", 
    "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{"popsDatasets", "=", 
      RowBox[{"Table", "[", 
       RowBox[{
        RowBox[{"Transpose", "[", 
         RowBox[{
          RowBox[{
           RowBox[{"Total", "/@", 
            RowBox[{"populationDatasets", "[", 
             RowBox[{"[", 
              RowBox[{"i", ",", "All", ",", 
               RowBox[{"#", "[", 
                RowBox[{"[", "2", "]"}], "]"}]}], "]"}], "]"}]}], "&"}], "/@",
           "genotypesIndicesToAggregate"}], "]"}], ",", 
        RowBox[{"{", 
         RowBox[{"i", ",", "1", ",", 
          RowBox[{"Length", "[", "populationDatasets", "]"}]}], "}"}]}], 
       "]"}]}], ";", "\[IndentingNewLine]", 
     RowBox[{"geneLabels", "=", 
      RowBox[{"genotypesIndicesToAggregate", "[", 
       RowBox[{"[", 
        RowBox[{"All", ",", "1"}], "]"}], "]"}]}], ";", "\[IndentingNewLine]", 
     RowBox[{"{", 
      RowBox[{"geneLabels", ",", 
       RowBox[{"AddTotalPopulationToDataset", "[", "popsDatasets", "]"}]}], 
      "}"}]}]}], "\[IndentingNewLine]", "]"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
  "AggregatePopulationAcrossNodes", "[", "aggregatedPopulations_", "]"}], ":=", 
  RowBox[{"Table", "[", 
   RowBox[{
    RowBox[{"Total", "/@", 
     RowBox[{"(", 
      RowBox[{
       RowBox[{"aggregatedPopulations", "[", 
        RowBox[{"[", 
         RowBox[{"All", ",", "i"}], "]"}], "]"}], "//", "Transpose"}], 
      ")"}]}], ",", 
    RowBox[{"{", 
     RowBox[{"i", ",", "1", ",", 
      RowBox[{"Length", "[", 
       RowBox[{"aggregatedPopulations", "[", 
        RowBox[{"[", "1", "]"}], "]"}], "]"}]}], "}"}]}], 
   "]"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"SubsetPopulations", "[", 
   RowBox[{
    RowBox[{"{", 
     RowBox[{
     "aggregatedPopulations_", ",", "aggregatedPopulationsAcrossNodes_"}], 
     "}"}], ",", "dataRange_"}], "]"}], ":=", 
  RowBox[{"{", 
   RowBox[{
    RowBox[{
     RowBox[{"aggregatedPopulations", "[", 
      RowBox[{"[", 
       RowBox[{"All", ",", 
        RowBox[{
         RowBox[{"dataRange", "[", 
          RowBox[{"[", "1", "]"}], "]"}], ";;", 
         RowBox[{"dataRange", "[", 
          RowBox[{"[", "2", "]"}], "]"}]}]}], "]"}], "]"}], "//", 
     "Transpose"}], ",", 
    RowBox[{"aggregatedPopulationsAcrossNodes", "[", 
     RowBox[{"[", 
      RowBox[{
       RowBox[{"dataRange", "[", 
        RowBox[{"[", "1", "]"}], "]"}], ";;", 
       RowBox[{"dataRange", "[", 
        RowBox[{"[", "2", "]"}], "]"}]}], "]"}], "]"}]}], 
   "}"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"GeneratePopCountsFrames", "[", 
   RowBox[{
    RowBox[{"{", 
     RowBox[{"labels_", ",", "colors_"}], "}"}], ",", 
    "subsetPopulationsAccrossNodes_"}], "]"}], ":=", 
  RowBox[{"Module", "[", 
   RowBox[{
    RowBox[{"{", 
     RowBox[{"styledLabels", ",", "styledNumbers", ",", "gridFrames"}], "}"}],
     ",", "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{"styledLabels", "=", 
      RowBox[{
       RowBox[{
        RowBox[{"Style", "[", 
         RowBox[{"#", ",", "30"}], "]"}], "&"}], "/@", "labels"}]}], ";", 
     "\[IndentingNewLine]", 
     RowBox[{"styledNumbers", "=", 
      RowBox[{"Table", "[", 
       RowBox[{
        RowBox[{
         RowBox[{
          RowBox[{"Style", "[", 
           RowBox[{
            RowBox[{"Round", "[", "#", "]"}], ",", "30", ",", "Gray"}], "]"}],
           "&"}], "/@", 
         RowBox[{"Threshold", "[", 
          RowBox[{"i", ",", 
           RowBox[{"{", 
            RowBox[{"\"\<Hard\>\"", ",", 
             SuperscriptBox["10", 
              RowBox[{"-", "1"}]]}], "}"}]}], "]"}]}], ",", 
        RowBox[{"{", 
         RowBox[{"i", ",", "subsetPopulationsAccrossNodes"}], "}"}]}], 
       "]"}]}], ";", "\[IndentingNewLine]", 
     RowBox[{"gridFrames", "=", 
      RowBox[{"Table", "[", "\[IndentingNewLine]", 
       RowBox[{
        RowBox[{"Grid", "[", 
         RowBox[{
          RowBox[{
           RowBox[{"{", 
            RowBox[{"styledLabels", ",", 
             RowBox[{"styledNumbers", "[", 
              RowBox[{"[", "i", "]"}], "]"}]}], "}"}], "//", "Transpose"}], 
          ",", "\[IndentingNewLine]", 
          RowBox[{"Frame", "\[Rule]", "True"}], ",", "\[IndentingNewLine]", 
          RowBox[{"FrameStyle", "\[Rule]", "Thick"}], ",", 
          "\[IndentingNewLine]", 
          RowBox[{"ItemSize", "\[Rule]", "40"}], ",", "\[IndentingNewLine]", 
          RowBox[{"Background", "\[Rule]", 
           RowBox[{"{", 
            RowBox[{"None", ",", 
             RowBox[{
              RowBox[{
               RowBox[{"Opacity", "[", 
                RowBox[{".25", ",", "#"}], "]"}], "&"}], "/@", "colors"}]}], 
            "}"}]}], ",", "\[IndentingNewLine]", 
          RowBox[{"Alignment", "\[Rule]", "Center"}]}], "\[IndentingNewLine]",
          "]"}], "\[IndentingNewLine]", ",", 
        RowBox[{"{", 
         RowBox[{"i", ",", "1", ",", 
          RowBox[{"subsetPopulationsAccrossNodes", "//", "Length"}]}], 
         "}"}]}], "]"}]}]}]}], "\[IndentingNewLine]", 
   "]"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"BarChartPopCountsFrames", "[", 
   RowBox[{"subsetPopulations_", ",", 
    RowBox[{"{", 
     RowBox[{"colors_", ",", "maxPop_", ",", "frameDimensions_"}], "}"}]}], 
   "]"}], ":=", 
  RowBox[{"BarChart", "[", 
   RowBox[{
    RowBox[{"subsetPopulations", "[", 
     RowBox[{"[", 
      RowBox[{"All", ",", 
       RowBox[{"1", ";;", 
        RowBox[{"(", 
         RowBox[{
          RowBox[{"Length", "[", "labels", "]"}], "-", "1"}], ")"}]}]}], 
      "]"}], "]"}], ",", "\[IndentingNewLine]", 
    RowBox[{"ChartLayout", "\[Rule]", "\"\<Stacked\>\""}], ",", 
    "\[IndentingNewLine]", 
    RowBox[{"ChartStyle", "\[Rule]", 
     RowBox[{"{", 
      RowBox[{
       RowBox[{"EdgeForm", "[", "None", "]"}], ",", 
       RowBox[{"(", 
        RowBox[{
         RowBox[{
          RowBox[{"Directive", "[", 
           RowBox[{
            RowBox[{"Opacity", "[", "1", "]"}], ",", "#"}], "]"}], "&"}], "/@",
          "colors"}], " ", ")"}]}], "}"}]}], ",", "\[IndentingNewLine]", 
    RowBox[{"Frame", "\[Rule]", "False"}], ",", "\[IndentingNewLine]", 
    RowBox[{"PlotRange", "\[Rule]", 
     RowBox[{"{", 
      RowBox[{
       RowBox[{"{", 
        RowBox[{".5", ",", 
         RowBox[{
          RowBox[{"Length", "[", "subsetPopulations", "]"}], "+", ".5"}]}], 
        "}"}], ",", 
       RowBox[{"{", 
        RowBox[{"0", ",", "maxPop"}], "}"}]}], "}"}]}], ",", 
    "\[IndentingNewLine]", 
    RowBox[{"Axes", "\[Rule]", "False"}], ",", "\[IndentingNewLine]", 
    RowBox[{"PerformanceGoal", "\[Rule]", "\"\<Speed\>\""}], ",", 
    "\[IndentingNewLine]", 
    RowBox[{"BarSpacing", "\[Rule]", ".05"}], ",", "\[IndentingNewLine]", 
    RowBox[{"ImagePadding", "\[Rule]", "0"}], ",", "\[IndentingNewLine]", 
    RowBox[{"AspectRatio", "\[Rule]", 
     RowBox[{"1", "/", "10"}]}], ",", "\[IndentingNewLine]", 
    RowBox[{"BarOrigin", "\[Rule]", "Top"}], ",", "\[IndentingNewLine]", 
    RowBox[{"PlotRangePadding", "\[Rule]", 
     RowBox[{"{", 
      RowBox[{"0", ",", "0"}], "}"}]}], ",", "\[IndentingNewLine]", 
    RowBox[{"ImageSize", "\[Rule]", 
     RowBox[{"frameDimensions", "[", 
      RowBox[{"[", "1", "]"}], "]"}]}]}], "\[IndentingNewLine]", 
   "]"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"BarChartPopDynamicsFrames", "[", 
   RowBox[{"tick_", ",", "aggregatedPopulationsAcrossNodes_", ",", 
    RowBox[{"{", 
     RowBox[{
     "colors_", ",", "maxPop_", ",", "ticksMax_", ",", "frameDimensions_", 
      ",", "labels_"}], "}"}]}], "]"}], ":=", 
  RowBox[{"Module", "[", 
   RowBox[{
    RowBox[{"{", "dataUntilTick", "}"}], ",", "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{"dataUntilTick", "=", 
      RowBox[{
       RowBox[{"aggregatedPopulationsAcrossNodes", "[", 
        RowBox[{"[", 
         RowBox[{"1", ";;", "tick"}], "]"}], "]"}], "[", 
       RowBox[{"[", 
        RowBox[{"All", ",", 
         RowBox[{"1", ";;", 
          RowBox[{"(", 
           RowBox[{
            RowBox[{"Length", "[", "labels", "]"}], "-", "1"}], ")"}]}]}], 
        "]"}], "]"}]}], ";", "\[IndentingNewLine]", 
     RowBox[{"BarChart", "[", 
      RowBox[{"dataUntilTick", ",", "\[IndentingNewLine]", 
       RowBox[{"ChartLayout", "\[Rule]", "\"\<Stacked\>\""}], ",", 
       "\[IndentingNewLine]", 
       RowBox[{"ChartStyle", "\[Rule]", 
        RowBox[{"{", 
         RowBox[{
          RowBox[{"EdgeForm", "[", "None", "]"}], ",", 
          RowBox[{"(", 
           RowBox[{
            RowBox[{
             RowBox[{"Directive", "[", 
              RowBox[{
               RowBox[{"Opacity", "[", "1", "]"}], ",", "#"}], "]"}], "&"}], "/@",
             "colors"}], " ", ")"}]}], "}"}]}], ",", "\[IndentingNewLine]", 
       RowBox[{"Frame", "\[Rule]", "False"}], ",", "\[IndentingNewLine]", 
       RowBox[{"PlotRange", "\[Rule]", 
        RowBox[{"{", 
         RowBox[{
          RowBox[{"{", 
           RowBox[{"0", ",", "ticksMax"}], "}"}], ",", 
          RowBox[{"{", 
           RowBox[{"0", ",", "maxPop"}], "}"}]}], "}"}]}], ",", 
       "\[IndentingNewLine]", 
       RowBox[{"Axes", "\[Rule]", "False"}], ",", "\[IndentingNewLine]", 
       RowBox[{"PerformanceGoal", "\[Rule]", "\"\<Speed\>\""}], ",", 
       "\[IndentingNewLine]", 
       RowBox[{"BarSpacing", "\[Rule]", 
        RowBox[{"{", 
         RowBox[{"0", ",", "0"}], "}"}]}], ",", "\[IndentingNewLine]", 
       RowBox[{"ImagePadding", "\[Rule]", "0"}], ",", "\[IndentingNewLine]", 
       RowBox[{"AspectRatio", "\[Rule]", 
        RowBox[{"1", "/", "10"}]}], ",", "\[IndentingNewLine]", 
       RowBox[{"BarOrigin", "\[Rule]", "Bottom"}], ",", "\[IndentingNewLine]", 
       RowBox[{"PlotRangePadding", "\[Rule]", 
        RowBox[{"{", 
         RowBox[{"0", ",", "0"}], "}"}]}], ",", "\[IndentingNewLine]", 
       RowBox[{"ImageSize", "\[Rule]", 
        RowBox[{"frameDimensions", "[", 
         RowBox[{"[", "1", "]"}], "]"}]}]}], "\[IndentingNewLine]", "]"}]}]}],
    "\[IndentingNewLine]", "]"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"ExportFrames", "[", 
   RowBox[{"plots_", ",", "dataRange_", ",", 
    RowBox[{"{", 
     RowBox[{"outputBasePath_", ",", "outputFolder_", ",", "filesBaseName_"}],
      "}"}]}], "]"}], ":=", 
  RowBox[{"Module", "[", 
   RowBox[{
    RowBox[{"{", 
     RowBox[{"namesStrings", ",", "pathsStrings"}], "}"}], ",", 
    "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{"namesStrings", "=", 
      RowBox[{
       RowBox[{
        RowBox[{"(", 
         RowBox[{"filesBaseName", "<>", 
          RowBox[{"StringPadLeft", "[", 
           RowBox[{
            RowBox[{"ToString", "[", "#", "]"}], ",", "6", ",", "\"\<0\>\""}],
            "]"}], "<>", "\"\<.png\>\""}], ")"}], "&"}], "/@", 
       RowBox[{"Range", "[", 
        RowBox[{
         RowBox[{"dataRange", "[", 
          RowBox[{"[", "1", "]"}], "]"}], ",", 
         RowBox[{"dataRange", "[", 
          RowBox[{"[", "2", "]"}], "]"}]}], "]"}]}]}], ";", 
     "\[IndentingNewLine]", 
     RowBox[{"pathsStrings", "=", 
      RowBox[{
       RowBox[{
        RowBox[{"(", 
         RowBox[{"outputBasePath", "<>", "outputFolder", "<>", "#"}], ")"}], 
        "&"}], "/@", "namesStrings"}]}], ";", "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{
       RowBox[{"Export", "[", 
        RowBox[{
         RowBox[{"#", "[", 
          RowBox[{"[", "1", "]"}], "]"}], ",", 
         RowBox[{"#", "[", 
          RowBox[{"[", "2", "]"}], "]"}]}], "]"}], "&"}], "/@", 
      RowBox[{"Transpose", "[", 
       RowBox[{"{", 
        RowBox[{"pathsStrings", ",", "plots"}], "}"}], "]"}]}]}]}], 
   "\[IndentingNewLine]", "]"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"BarChartPopDynamicsMaskFrames", "[", 
   RowBox[{"fullRaster_", ",", 
    RowBox[{"{", 
     RowBox[{"tick_", ",", "ticksMax_"}], "}"}]}], "]"}], ":=", 
  RowBox[{"Module", "[", 
   RowBox[{
    RowBox[{"{", 
     RowBox[{"rasterDimensions", ",", "stepSize", ",", "composedImage", ",", 
      RowBox[{"day", "=", "tick"}]}], "}"}], ",", "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{"rasterDimensions", "=", 
      RowBox[{"ImageDimensions", "[", "fullRaster", "]"}]}], ";", 
     "\[IndentingNewLine]", 
     RowBox[{"stepSize", "=", 
      RowBox[{
       RowBox[{
        RowBox[{"rasterDimensions", "[", 
         RowBox[{"[", "1", "]"}], "]"}], "/", "ticksMax"}], "//", "N"}]}], 
     ";", "\[IndentingNewLine]", 
     RowBox[{"composedImage", "=", 
      RowBox[{"ImageCompose", "[", "\[IndentingNewLine]", 
       RowBox[{"fullRaster", ",", "\[IndentingNewLine]", 
        RowBox[{"Graphics", "[", 
         RowBox[{
          RowBox[{"{", "\[IndentingNewLine]", 
           RowBox[{"Yellow", ",", 
            RowBox[{"Opacity", "[", "0", "]"}], ",", 
            RowBox[{"Rectangle", "[", 
             RowBox[{
              RowBox[{"{", 
               RowBox[{"0", ",", "0"}], "}"}], ",", 
              RowBox[{"{", 
               RowBox[{
                RowBox[{"rasterDimensions", "[", 
                 RowBox[{"[", "1", "]"}], "]"}], ",", 
                RowBox[{"rasterDimensions", "[", 
                 RowBox[{"[", "2", "]"}], "]"}]}], "}"}]}], "]"}], ",", 
            "\[IndentingNewLine]", "Black", ",", 
            RowBox[{"Opacity", "[", "1", "]"}], ",", 
            RowBox[{"Rectangle", "[", 
             RowBox[{
              RowBox[{"{", 
               RowBox[{
                RowBox[{"day", "*", "stepSize"}], ",", "0"}], "}"}], ",", 
              RowBox[{"{", 
               RowBox[{
                RowBox[{
                 RowBox[{"day", "*", "stepSize"}], "+", 
                 RowBox[{"2", "*", "stepSize"}]}], ",", 
                RowBox[{"rasterDimensions", "[", 
                 RowBox[{"[", "2", "]"}], "]"}]}], "}"}]}], "]"}], ",", 
            "\[IndentingNewLine]", "White", ",", 
            RowBox[{"Opacity", "[", ".75", "]"}], ",", 
            RowBox[{"Rectangle", "[", 
             RowBox[{
              RowBox[{"{", 
               RowBox[{
                RowBox[{
                 RowBox[{"day", "*", "stepSize"}], "+", 
                 RowBox[{"2", "*", "stepSize", "*", "stepSize"}]}], ",", 
                "0"}], "}"}], ",", 
              RowBox[{"{", 
               RowBox[{
                RowBox[{"rasterDimensions", "[", 
                 RowBox[{"[", "1", "]"}], "]"}], ",", 
                RowBox[{"rasterDimensions", "[", 
                 RowBox[{"[", "2", "]"}], "]"}]}], "}"}]}], "]"}]}], 
           "\[IndentingNewLine]", "}"}], ",", "\[IndentingNewLine]", 
          RowBox[{"ImageSize", "\[Rule]", 
           RowBox[{"rasterDimensions", "[", 
            RowBox[{"[", "1", "]"}], "]"}]}], ",", "\[IndentingNewLine]", 
          RowBox[{"AspectRatio", "\[Rule]", 
           RowBox[{"1", "/", "5"}]}], ",", "\[IndentingNewLine]", 
          RowBox[{"ImagePadding", "\[Rule]", "None"}], ",", 
          "\[IndentingNewLine]", 
          RowBox[{"ImageMargins", "\[Rule]", "0"}], ",", 
          "\[IndentingNewLine]", 
          RowBox[{"PlotRangePadding", "\[Rule]", "None"}]}], 
         "\[IndentingNewLine]", "]"}]}], "\[IndentingNewLine]", "]"}]}]}]}], 
   "\[IndentingNewLine]", "]"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"EdgesStyleList2", "[", 
   RowBox[{"vertexSyllableList_", ",", 
    RowBox[{"OptionsPattern", "[", "]"}]}], "]"}], ":=", 
  RowBox[{"Switch", "[", 
   RowBox[{
    RowBox[{"OptionValue", "[", "VariableStyle", "]"}], ",", 
    "\[IndentingNewLine]", "\"\<LineColor\>\"", ",", 
    RowBox[{"Table", "[", 
     RowBox[{
      RowBox[{
       RowBox[{"DirectedEdge", "[", 
        RowBox[{
         RowBox[{
          RowBox[{
           RowBox[{"vertexSyllableList", "[", 
            RowBox[{"[", "i", "]"}], "]"}], "[", 
           RowBox[{"[", "1", "]"}], "]"}], "[", 
          RowBox[{"[", "1", "]"}], "]"}], ",", 
         RowBox[{
          RowBox[{
           RowBox[{"vertexSyllableList", "[", 
            RowBox[{"[", "i", "]"}], "]"}], "[", 
           RowBox[{"[", "1", "]"}], "]"}], "[", 
          RowBox[{"[", "2", "]"}], "]"}]}], "]"}], "\[Rule]", 
       RowBox[{"{", 
        RowBox[{
         RowBox[{"Opacity", "[", 
          RowBox[{
           RowBox[{"1", "*", 
            RowBox[{
             RowBox[{"vertexSyllableList", "[", 
              RowBox[{"[", "i", "]"}], "]"}], "[", 
             RowBox[{"[", "2", "]"}], "]"}]}], "+", ".025"}], "]"}], ",", 
         RowBox[{"Thickness", "[", 
          RowBox[{"OptionValue", "[", "LineThickness", "]"}], "]"}]}], 
        "}"}]}], ",", 
      RowBox[{"{", 
       RowBox[{"i", ",", "1", ",", 
        RowBox[{"Length", "[", "vertexSyllableList", "]"}]}], "}"}]}], "]"}], 
    ",", "\[IndentingNewLine]", "\"\<LineWidth\>\"", ",", 
    RowBox[{"Table", "[", 
     RowBox[{
      RowBox[{
       RowBox[{"DirectedEdge", "[", 
        RowBox[{
         RowBox[{
          RowBox[{
           RowBox[{"vertexSyllableList", "[", 
            RowBox[{"[", "i", "]"}], "]"}], "[", 
           RowBox[{"[", "1", "]"}], "]"}], "[", 
          RowBox[{"[", "1", "]"}], "]"}], ",", 
         RowBox[{
          RowBox[{
           RowBox[{"vertexSyllableList", "[", 
            RowBox[{"[", "i", "]"}], "]"}], "[", 
           RowBox[{"[", "1", "]"}], "]"}], "[", 
          RowBox[{"[", "2", "]"}], "]"}]}], "]"}], "\[Rule]", 
       RowBox[{"{", 
        RowBox[{
         RowBox[{"Opacity", "[", ".5", "]"}], ",", "Blue", ",", 
         RowBox[{"Thickness", "[", 
          RowBox[{
           RowBox[{
            RowBox[{"vertexSyllableList", "[", 
             RowBox[{"[", "i", "]"}], "]"}], "[", 
            RowBox[{"[", "2", "]"}], "]"}], "*", 
           RowBox[{"OptionValue", "[", "LineThickness", "]"}]}], "]"}]}], 
        "}"}]}], ",", 
      RowBox[{"{", 
       RowBox[{"i", ",", "1", ",", 
        RowBox[{"Length", "[", "vertexSyllableList", "]"}]}], "}"}]}], "]"}], 
    ",", "\[IndentingNewLine]", "\"\<Both\>\"", ",", 
    RowBox[{"Table", "[", 
     RowBox[{
      RowBox[{
       RowBox[{"DirectedEdge", "[", 
        RowBox[{
         RowBox[{
          RowBox[{
           RowBox[{"vertexSyllableList", "[", 
            RowBox[{"[", "i", "]"}], "]"}], "[", 
           RowBox[{"[", "1", "]"}], "]"}], "[", 
          RowBox[{"[", "1", "]"}], "]"}], ",", 
         RowBox[{
          RowBox[{
           RowBox[{"vertexSyllableList", "[", 
            RowBox[{"[", "i", "]"}], "]"}], "[", 
           RowBox[{"[", "1", "]"}], "]"}], "[", 
          RowBox[{"[", "2", "]"}], "]"}]}], "]"}], "\[Rule]", 
       RowBox[{"{", 
        RowBox[{
         RowBox[{"Opacity", "[", 
          RowBox[{
           RowBox[{".75", "*", 
            RowBox[{
             RowBox[{"vertexSyllableList", "[", 
              RowBox[{"[", "i", "]"}], "]"}], "[", 
             RowBox[{"[", "2", "]"}], "]"}]}], "+", ".05"}], "]"}], ",", 
         RowBox[{"Thickness", "[", 
          RowBox[{
           RowBox[{
            RowBox[{"vertexSyllableList", "[", 
             RowBox[{"[", "i", "]"}], "]"}], "[", 
            RowBox[{"[", "2", "]"}], "]"}], "*", 
           RowBox[{"OptionValue", "[", "LineThickness", "]"}]}], "]"}]}], 
        "}"}]}], ",", 
      RowBox[{"{", 
       RowBox[{"i", ",", "1", ",", 
        RowBox[{"Length", "[", "vertexSyllableList", "]"}]}], "}"}]}], "]"}], 
    ",", "_", ",", 
    RowBox[{"Table", "[", 
     RowBox[{
      RowBox[{
       RowBox[{"DirectedEdge", "[", 
        RowBox[{
         RowBox[{
          RowBox[{
           RowBox[{"vertexSyllableList", "[", 
            RowBox[{"[", "i", "]"}], "]"}], "[", 
           RowBox[{"[", "1", "]"}], "]"}], "[", 
          RowBox[{"[", "1", "]"}], "]"}], ",", 
         RowBox[{
          RowBox[{
           RowBox[{"vertexSyllableList", "[", 
            RowBox[{"[", "i", "]"}], "]"}], "[", 
           RowBox[{"[", "1", "]"}], "]"}], "[", 
          RowBox[{"[", "2", "]"}], "]"}]}], "]"}], "\[Rule]", 
       RowBox[{"{", 
        RowBox[{"Thickness", "[", 
         RowBox[{"OptionValue", "[", "LineThickness", "]"}], "]"}], "}"}]}], 
      ",", 
      RowBox[{"{", 
       RowBox[{"i", ",", "1", ",", 
        RowBox[{"Length", "[", "vertexSyllableList", "]"}]}], "}"}]}], 
     "]"}]}], "]"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"edgeshape", "[", 
   RowBox[{"e_", ",", "___"}], "]"}], ":=", 
  RowBox[{"{", 
   RowBox[{
    RowBox[{"Arrowheads", "[", 
     RowBox[{"{", 
      RowBox[{"{", 
       RowBox[{".0001", ",", ".5"}], "}"}], "}"}], "]"}], ",", 
    RowBox[{"Arrow", "[", "e", "]"}]}], "}"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"Options", "[", "GraphTransitionsFrequenciesWithMax", "]"}], ":=", 
  RowBox[{"{", 
   RowBox[{
    RowBox[{"ImagePadding", "\[Rule]", "None"}], ",", 
    RowBox[{"Background", "\[Rule]", "White"}], ",", 
    RowBox[{"VertexStyle", "\[Rule]", "Automatic"}], ",", 
    RowBox[{"VertexCoordinates", "\[Rule]", "Automatic"}], ",", 
    RowBox[{"LineThickness", "\[Rule]", ".0005"}], ",", 
    RowBox[{"VariableStyle", "\[Rule]", "\"\<Both\>\""}], ",", 
    RowBox[{"GraphLayout", "\[Rule]", "Automatic"}], ",", 
    RowBox[{"ImageSize", "\[Rule]", "Automatic"}], ",", 
    RowBox[{"VertexSize", "\[Rule]", ".5"}], ",", 
    RowBox[{"EdgeShapeFunction", "\[Rule]", "edgeshape"}], ",", 
    RowBox[{"VertexLabelStyle", "\[Rule]", 
     RowBox[{"{", "Italic", "}"}]}], ",", 
    RowBox[{"Prolog", "\[Rule]", 
     RowBox[{"{", "}"}]}], ",", 
    RowBox[{"Epilog", "\[Rule]", 
     RowBox[{"{", "}"}]}], ",", 
    RowBox[{"VertexShape", "\[Rule]", "Automatic"}]}], "}"}]}], "\n", 
 RowBox[{
  RowBox[{"GraphTransitionsFrequenciesWithMax", "[", 
   RowBox[{"frequenciesOutput_", ",", "max_", ",", 
    RowBox[{"OptionsPattern", "[", "]"}]}], "]"}], ":=", 
  RowBox[{"Module", "[", 
   RowBox[{
    RowBox[{"{", 
     RowBox[{
     "frequencies", ",", "syllables", ",", "edges", ",", "fixedEdgesList", 
      ",", "vertexSyllableList", ",", "normalizedVertexSyllableList", ",", 
      "edgesStyleList", ",", "links"}], "}"}], ",", 
    RowBox[{
     RowBox[{"frequencies", "=", 
      RowBox[{"frequenciesOutput", "[", 
       RowBox[{"[", "1", "]"}], "]"}]}], ";", "\[IndentingNewLine]", 
     RowBox[{"syllables", "=", 
      RowBox[{"frequenciesOutput", "[", 
       RowBox[{"[", "2", "]"}], "]"}]}], ";", "\[IndentingNewLine]", 
     RowBox[{"edges", "=", 
      RowBox[{
       RowBox[{"Table", "[", 
        RowBox[{
         RowBox[{
          RowBox[{"DirectedEdge", "[", 
           RowBox[{"i", ",", "j"}], "]"}], "\[Rule]", 
          RowBox[{"frequencies", "[", 
           RowBox[{"[", 
            RowBox[{"i", ",", "j"}], "]"}], "]"}]}], ",", 
         RowBox[{"{", 
          RowBox[{"i", ",", 
           RowBox[{"Length", "[", "syllables", "]"}]}], "}"}], ",", 
         RowBox[{"{", 
          RowBox[{"j", ",", 
           RowBox[{"Length", "[", "syllables", "]"}]}], "}"}]}], "]"}], "//", 
       "Flatten"}]}], ";", "\[IndentingNewLine]", 
     RowBox[{"fixedEdgesList", "=", 
      RowBox[{"DeleteCases", "[", 
       RowBox[{"edges", ",", 
        RowBox[{
         RowBox[{"DirectedEdge", "[", 
          RowBox[{"_", ",", "_"}], "]"}], "\[Rule]", "0"}]}], "]"}]}], ";", 
     "\[IndentingNewLine]", 
     RowBox[{"vertexSyllableList", "=", 
      RowBox[{"VertexNumberToVertexSyllable", "[", 
       RowBox[{
        RowBox[{"frequenciesOutput", "[", 
         RowBox[{"[", "2", "]"}], "]"}], ",", "fixedEdgesList"}], "]"}]}], 
     ";", "\[IndentingNewLine]", 
     RowBox[{"normalizedVertexSyllableList", "=", 
      RowBox[{
       RowBox[{"(", 
        RowBox[{
         RowBox[{
          RowBox[{"DirectedEdge", "[", 
           RowBox[{
            RowBox[{"#", "[", 
             RowBox[{"[", "1", "]"}], "]"}], ",", 
            RowBox[{
             RowBox[{"#", "[", 
              RowBox[{"[", "2", "]"}], "]"}], "[", 
             RowBox[{"[", "1", "]"}], "]"}]}], "]"}], "\[Rule]", 
          RowBox[{
           RowBox[{
            RowBox[{"#", "[", 
             RowBox[{"[", "2", "]"}], "]"}], "[", 
            RowBox[{"[", "2", "]"}], "]"}], "/", "max"}]}], "&"}], ")"}], "/@",
        "vertexSyllableList"}]}], ";", "\[IndentingNewLine]", 
     RowBox[{"edgesStyleList", "=", 
      RowBox[{"EdgesStyleList2", "[", 
       RowBox[{"normalizedVertexSyllableList", ",", 
        RowBox[{"LineThickness", "\[Rule]", 
         RowBox[{"OptionValue", "[", "LineThickness", "]"}]}], ",", 
        RowBox[{"VariableStyle", "\[Rule]", 
         RowBox[{"OptionValue", "[", "VariableStyle", "]"}]}]}], "]"}]}], ";",
      "\[IndentingNewLine]", 
     RowBox[{"links", "=", 
      RowBox[{
       RowBox[{
        RowBox[{"DirectedEdge", "[", 
         RowBox[{
          RowBox[{"#", "[", 
           RowBox[{"[", "1", "]"}], "]"}], ",", 
          RowBox[{"#", "[", 
           RowBox[{"[", 
            RowBox[{"2", ",", "1"}], "]"}], "]"}]}], "]"}], "&"}], "/@", 
       "vertexSyllableList"}]}], ";", "\[IndentingNewLine]", 
     RowBox[{"Graph", "[", 
      RowBox[{"syllables", ",", "links", ",", "\[IndentingNewLine]", 
       RowBox[{"EdgeWeight", "\[Rule]", 
        RowBox[{"vertexSyllableList", "[", 
         RowBox[{"[", 
          RowBox[{"All", ",", "2", ",", "2"}], "]"}], "]"}]}], ",", 
       "\[IndentingNewLine]", 
       RowBox[{"VertexStyle", "\[Rule]", 
        RowBox[{"OptionValue", "[", "VertexStyle", "]"}]}], ",", 
       "\[IndentingNewLine]", 
       RowBox[{"EdgeStyle", "\[Rule]", "edgesStyleList"}], ",", 
       "\[IndentingNewLine]", 
       RowBox[{"VertexCoordinates", "\[Rule]", 
        RowBox[{"OptionValue", "[", "VertexCoordinates", "]"}]}], ",", 
       "\[IndentingNewLine]", 
       RowBox[{"ImageSize", "\[Rule]", 
        RowBox[{"OptionValue", "[", "ImageSize", "]"}]}], ",", 
       "\[IndentingNewLine]", 
       RowBox[{"GraphLayout", "\[Rule]", 
        RowBox[{"OptionValue", "[", "GraphLayout", "]"}]}], ",", 
       "\[IndentingNewLine]", 
       RowBox[{"EdgeShapeFunction", "\[Rule]", 
        RowBox[{"OptionValue", "[", "EdgeShapeFunction", "]"}]}], ",", 
       "\[IndentingNewLine]", 
       RowBox[{"VertexShape", "\[Rule]", 
        RowBox[{"OptionValue", "[", "VertexShape", "]"}]}], ",", 
       "\[IndentingNewLine]", 
       RowBox[{"VertexSize", "\[Rule]", 
        RowBox[{"OptionValue", "[", "VertexSize", "]"}]}], ",", 
       "\[IndentingNewLine]", 
       RowBox[{"AspectRatio", "\[Rule]", "1"}], ",", "\[IndentingNewLine]", 
       RowBox[{"VertexLabelStyle", "\[Rule]", 
        RowBox[{"OptionValue", "[", "VertexLabelStyle", "]"}]}], ",", 
       "\[IndentingNewLine]", 
       RowBox[{"VertexLabels", "\[Rule]", 
        RowBox[{"Placed", "[", 
         RowBox[{"\"\<Name\>\"", ",", "Center"}], "]"}]}], ",", 
       "\[IndentingNewLine]", 
       RowBox[{"EdgeLabels", "\[Rule]", 
        RowBox[{"Table", "[", 
         RowBox[{
          RowBox[{
           RowBox[{"links", "[", 
            RowBox[{"[", "i", "]"}], "]"}], "\[Rule]", 
           RowBox[{"Placed", "[", 
            RowBox[{
             RowBox[{
              RowBox[{"fixedEdgesList", "[", 
               RowBox[{"[", 
                RowBox[{"All", ",", "2"}], "]"}], "]"}], "[", 
              RowBox[{"[", "i", "]"}], "]"}], ",", "Tooltip"}], "]"}]}], ",", 
          
          RowBox[{"{", 
           RowBox[{"i", ",", 
            RowBox[{"Length", "[", "links", "]"}]}], "}"}]}], "]"}]}], ",", 
       "\[IndentingNewLine]", 
       RowBox[{"Prolog", "\[Rule]", 
        RowBox[{"OptionValue", "[", "Prolog", "]"}]}], ",", 
       "\[IndentingNewLine]", 
       RowBox[{"Epilog", "\[Rule]", 
        RowBox[{"OptionValue", "[", "Epilog", "]"}]}], ",", 
       "\[IndentingNewLine]", 
       RowBox[{"Background", "\[Rule]", 
        RowBox[{"OptionValue", "[", "Background", "]"}]}], ",", 
       "\[IndentingNewLine]", 
       RowBox[{"ImagePadding", "\[Rule]", 
        RowBox[{"OptionValue", "[", "ImagePadding", "]"}]}], ",", 
       "\[IndentingNewLine]", 
       RowBox[{"PerformanceGoal", "\[Rule]", "\"\<Speed\>\""}]}], 
      "\[IndentingNewLine]", "]"}]}]}], "\[IndentingNewLine]", 
   "]"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"CalculateNetworkParameters", "[", "cities_", "]"}], ":=", 
  RowBox[{"Module", "[", 
   RowBox[{
    RowBox[{"{", 
     RowBox[{
     "range", ",", "transitionsMatrix2", ",", "vertexCoordinates", ",", 
      "transMatrix"}], "}"}], ",", "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{"range", "=", 
      RowBox[{"Range", "[", 
       RowBox[{"cities", "//", "Length"}], "]"}]}], ";", 
     "\[IndentingNewLine]", 
     RowBox[{"transitionsMatrix2", "=", 
      RowBox[{"{", 
       RowBox[{"transitionsMatrix", ",", 
        RowBox[{"ToString", "/@", "range"}]}], "}"}]}], ";", 
     "\[IndentingNewLine]", 
     RowBox[{"vertexCoordinates", "=", 
      RowBox[{
       RowBox[{
        RowBox[{"{", 
         RowBox[{
          RowBox[{"#", "[", 
           RowBox[{"[", "1", "]"}], "]"}], ",", 
          RowBox[{"#", "[", 
           RowBox[{"[", "2", "]"}], "]"}]}], "}"}], "&"}], "/@", 
       RowBox[{"cities", "[", 
        RowBox[{"[", 
         RowBox[{"All", ",", "2"}], "]"}], "]"}]}]}], ";", 
     "\[IndentingNewLine]", 
     RowBox[{"transMatrix", "=", 
      RowBox[{"{", 
       RowBox[{
        RowBox[{"ReplacePart", "[", 
         RowBox[{
          RowBox[{"Chop", "[", 
           RowBox[{
            RowBox[{"transitionsMatrix2", "[", 
             RowBox[{"[", "1", "]"}], "]"}], "//", "UpperTriangularize"}], 
           "]"}], ",", 
          RowBox[{
           RowBox[{"{", 
            RowBox[{"i_", ",", "i_"}], "}"}], "\[Rule]", "0"}]}], "]"}], ",", 
        
        RowBox[{"transitionsMatrix2", "[", 
         RowBox[{"[", "2", "]"}], "]"}]}], "}"}]}], ";", 
     "\[IndentingNewLine]", 
     RowBox[{"{", 
      RowBox[{"range", ",", "transMatrix", ",", "vertexCoordinates"}], 
      "}"}]}]}], "\[IndentingNewLine]", "]"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"CalculateVertexScalers", "[", 
   RowBox[{
    RowBox[{"{", 
     RowBox[{"range_", ",", "nodeScaler_"}], "}"}], ",", 
    "scaledSizesPieChartFramesAtFrame_"}], "]"}], ":=", 
  RowBox[{"Module", "[", 
   RowBox[{
    RowBox[{"{", 
     RowBox[{"vertexShapes", ",", "vertexSizes"}], "}"}], ",", 
    "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{"vertexShapes", "=", 
      RowBox[{"Flatten", "[", 
       RowBox[{
        RowBox[{
         RowBox[{"{", 
          RowBox[{
           RowBox[{"ToString", "[", 
            RowBox[{"#", "[", 
             RowBox[{"[", "1", "]"}], "]"}], "]"}], "\[Rule]", 
           RowBox[{"#", "[", 
            RowBox[{"[", 
             RowBox[{"2", ",", "1"}], "]"}], "]"}]}], "}"}], "&"}], "/@", 
        RowBox[{"Transpose", "[", 
         RowBox[{"{", 
          RowBox[{"range", ",", "scaledSizesPieChartFramesAtFrame"}], "}"}], 
         "]"}]}], "]"}]}], ";", "\[IndentingNewLine]", 
     RowBox[{"vertexSizes", "=", 
      RowBox[{"Flatten", "[", 
       RowBox[{
        RowBox[{
         RowBox[{"{", 
          RowBox[{
           RowBox[{"ToString", "[", 
            RowBox[{"#", "[", 
             RowBox[{"[", "1", "]"}], "]"}], " ", "]"}], "\[Rule]", 
           RowBox[{"nodeScaler", "*", 
            RowBox[{"#", "[", 
             RowBox[{"[", 
              RowBox[{"2", ",", "2"}], "]"}], "]"}]}]}], "}"}], "&"}], "/@", 
        RowBox[{"Transpose", "[", 
         RowBox[{"{", 
          RowBox[{"range", ",", "scaledSizesPieChartFramesAtFrame"}], "}"}], 
         "]"}]}], "]"}]}], ";", "\[IndentingNewLine]", 
     RowBox[{"{", 
      RowBox[{"vertexShapes", ",", "vertexSizes"}], "}"}]}]}], 
   "\[IndentingNewLine]", "]"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"GenerateNetworkFrames", "[", 
   RowBox[{"vertexShapeAndSizeFrames_", ",", 
    RowBox[{"{", 
     RowBox[{"vertexCoordinates_", ",", "networkMatrix_"}], "}"}], ",", 
    RowBox[{"{", 
     RowBox[{
     "edgeThreshold_", ",", "lineThickness_", ",", "frameDimensions_"}], 
     "}"}]}], "]"}], ":=", 
  RowBox[{"Module", "[", 
   RowBox[{
    RowBox[{"{", "}"}], ",", "\[IndentingNewLine]", 
    RowBox[{"GraphTransitionsFrequenciesWithMax", "[", 
     RowBox[{
     "networkMatrix", ",", "edgeThreshold", ",", "\[IndentingNewLine]", 
      RowBox[{"VertexCoordinates", "\[Rule]", "vertexCoordinates"}], ",", 
      "\[IndentingNewLine]", 
      RowBox[{"LineThickness", "\[Rule]", "lineThickness"}], ",", 
      "\[IndentingNewLine]", 
      RowBox[{"VertexShape", "\[Rule]", 
       RowBox[{"vertexShapeAndSizeFrames", "[", 
        RowBox[{"[", "1", "]"}], "]"}]}], ",", "\[IndentingNewLine]", 
      RowBox[{"VertexSize", "\[Rule]", 
       RowBox[{"vertexShapeAndSizeFrames", "[", 
        RowBox[{"[", "2", "]"}], "]"}]}], ",", "\[IndentingNewLine]", 
      RowBox[{"VariableStyle", "\[Rule]", "\"\<LineColor\>\""}], ",", 
      "\[IndentingNewLine]", 
      RowBox[{"VertexLabelStyle", "\[Rule]", 
       RowBox[{"Directive", "[", 
        RowBox[{"Red", ",", "Italic", ",", 
         RowBox[{"Opacity", "[", "0", "]"}]}], "]"}]}], ",", 
      "\[IndentingNewLine]", 
      RowBox[{"ImageSize", "\[Rule]", 
       RowBox[{"frameDimensions", "[", 
        RowBox[{"[", "1", "]"}], "]"}]}], ",", "\[IndentingNewLine]", 
      RowBox[{"(*", 
       RowBox[{
        RowBox[{"Prolog", "\[Rule]", 
         RowBox[{"Flatten", "[", 
          RowBox[{"{", 
           RowBox[{
            RowBox[{"EdgeForm", "[", 
             RowBox[{"{", 
              RowBox[{"Black", ",", 
               RowBox[{"Opacity", "[", ".9", "]"}], ",", 
               RowBox[{"Thickness", "[", ".015", "]"}]}], "}"}], "]"}], ",", 
            "White", ",", "countryMap"}], "}"}], "]"}]}], ","}], "*)"}], 
      "\[IndentingNewLine]", 
      RowBox[{"ImagePadding", "\[Rule]", "0"}]}], "\[IndentingNewLine]", 
     "]"}]}], "\[IndentingNewLine]", "]"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"ParseFilenames", "[", 
   RowBox[{"tick_", ",", 
    RowBox[{"{", 
     RowBox[{"outputFolder_", ",", 
      RowBox[{"{", 
       RowBox[{
       "outputPopCounts_", ",", "outputBarCharts_", ",", "outputFlow_", ",", 
        "outputNetworks_"}], "}"}], ",", 
      RowBox[{"{", 
       RowBox[{
       "baseCounts_", ",", "baseDays_", ",", "baseBarCharts_", ",", 
        "basePopDyn_", ",", "baseNetworks_"}], "}"}]}], "}"}]}], "]"}], ":=", 
  
  RowBox[{"Module", "[", 
   RowBox[{
    RowBox[{"{", 
     RowBox[{"paddedNumber", ",", "rastersFolders", ",", "rastersNames"}], 
     "}"}], ",", "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{"paddedNumber", "=", 
      RowBox[{"StringPadLeft", "[", 
       RowBox[{
        RowBox[{"ToString", "[", "tick", "]"}], ",", "6", ",", "\"\<0\>\""}], 
       "]"}]}], ";", "\[IndentingNewLine]", 
     RowBox[{"rastersFolders", "=", 
      RowBox[{
       RowBox[{
        RowBox[{"(", 
         RowBox[{"outputFolder", "<>", "#"}], ")"}], "&"}], "/@", 
       RowBox[{"{", 
        RowBox[{
        "outputPopCounts", ",", "outputBarCharts", ",", "outputFlow", ",", 
         "outputNetworks"}], "}"}]}]}], ";", "\[IndentingNewLine]", 
     RowBox[{"rastersNames", "=", 
      RowBox[{
       RowBox[{
        RowBox[{"(", 
         RowBox[{"#", "<>", "paddedNumber", "<>", "\"\<.png\>\""}], ")"}], 
        "&"}], "/@", 
       RowBox[{"{", 
        RowBox[{
        "baseCounts", ",", "baseDays", ",", "baseBarCharts", ",", 
         "basePopDyn", ",", "baseNetworks"}], "}"}]}]}], ";", 
     "\[IndentingNewLine]", 
     RowBox[{"{", "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{
        RowBox[{"rastersFolders", "[", 
         RowBox[{"[", "1", "]"}], "]"}], "<>", 
        RowBox[{"rastersNames", "[", 
         RowBox[{"[", "1", "]"}], "]"}]}], ",", "\[IndentingNewLine]", 
       RowBox[{
        RowBox[{"rastersFolders", "[", 
         RowBox[{"[", "1", "]"}], "]"}], "<>", 
        RowBox[{"rastersNames", "[", 
         RowBox[{"[", "2", "]"}], "]"}]}], ",", "\[IndentingNewLine]", 
       RowBox[{
        RowBox[{"rastersFolders", "[", 
         RowBox[{"[", "2", "]"}], "]"}], "<>", 
        RowBox[{"rastersNames", "[", 
         RowBox[{"[", "3", "]"}], "]"}]}], ",", "\[IndentingNewLine]", 
       RowBox[{
        RowBox[{"rastersFolders", "[", 
         RowBox[{"[", "3", "]"}], "]"}], "<>", 
        RowBox[{"rastersNames", "[", 
         RowBox[{"[", "4", "]"}], "]"}]}], ",", "\[IndentingNewLine]", 
       RowBox[{
        RowBox[{"rastersFolders", "[", 
         RowBox[{"[", "4", "]"}], "]"}], "<>", 
        RowBox[{"rastersNames", "[", 
         RowBox[{"[", "5", "]"}], "]"}]}]}], "\[IndentingNewLine]", "}"}]}]}],
    "\[IndentingNewLine]", "]"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"GenerateAnimationFrameFromFiles", "[", "fileNameTuple_", "]"}], ":=", 
  RowBox[{"Module", "[", 
   RowBox[{
    RowBox[{"{", 
     RowBox[{
     "popCount", ",", "dayCount", ",", "barChart", ",", "flow", ",", 
      "network", ",", "row"}], "}"}], ",", "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{
      RowBox[{"{", 
       RowBox[{
       "popCount", ",", "dayCount", ",", "barChart", ",", "flow", ",", 
        "network"}], "}"}], "=", 
      RowBox[{
       RowBox[{
        RowBox[{"Import", "[", "#", "]"}], "&"}], "/@", "fileNameTuple"}]}], 
     ";", "\[IndentingNewLine]", 
     RowBox[{"row", "=", 
      RowBox[{"Grid", "[", 
       RowBox[{"{", 
        RowBox[{"{", 
         RowBox[{
          RowBox[{
           RowBox[{"ImageRotate", "[", 
            RowBox[{"barChart", ",", 
             RowBox[{"90", "Degree"}]}], "]"}], "//", 
           RowBox[{
            RowBox[{"Show", "[", "#", "]"}], "&"}]}], ",", 
          RowBox[{"dayCount", "//", 
           RowBox[{
            RowBox[{"Show", "[", "#", "]"}], "&"}]}], ",", 
          RowBox[{"network", "//", 
           RowBox[{
            RowBox[{"Show", "[", "#", "]"}], "&"}]}], ",", 
          RowBox[{"popCount", "//", 
           RowBox[{
            RowBox[{"Show", "[", "#", "]"}], "&"}]}], ",", 
          RowBox[{
           RowBox[{"ImageRotate", "[", 
            RowBox[{"flow", ",", 
             RowBox[{"90", "Degree"}]}], "]"}], "//", 
           RowBox[{
            RowBox[{"Show", "[", "#", "]"}], "&"}]}]}], "}"}], "}"}], "]"}]}],
      ";", "\[IndentingNewLine]", 
     RowBox[{"Rasterize", "[", "row", "]"}]}]}], "\[IndentingNewLine]", 
   "]"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"GeneratePieChartsAtTick", "[", 
   RowBox[{"subsetPopulation_", ",", "labels_", ",", "maxPop_"}], "]"}], ":=", 
  RowBox[{"Module", "[", 
   RowBox[{
    RowBox[{"{", "chartAndPop", "}"}], ",", "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{"chartAndPop", "=", 
      RowBox[{
       RowBox[{
        RowBox[{"{", "\[IndentingNewLine]", 
         RowBox[{
          RowBox[{"PieChart", "[", 
           RowBox[{"#", ",", 
            RowBox[{"ChartStyle", "\[Rule]", "colors"}], ",", 
            RowBox[{"BaseStyle", "\[Rule]", 
             RowBox[{"Directive", "[", 
              RowBox[{"EdgeForm", "[", 
               RowBox[{"Thickness", "[", ".07", "]"}], "]"}], "]"}]}], ",", 
            RowBox[{"ColorFunction", "\[Rule]", 
             RowBox[{"(", 
              RowBox[{
               RowBox[{"EdgeForm", "[", "Black", "]"}], "&"}], ")"}]}], ",", 
            RowBox[{"PerformanceGoal", "\[Rule]", "\"\<Speed\>\""}]}], "]"}], 
          ",", "\[IndentingNewLine]", 
          RowBox[{"Total", "[", "#", "]"}]}], "\[IndentingNewLine]", "}"}], 
        "&"}], "/@", 
       RowBox[{"(", 
        RowBox[{"subsetPopulation", "[", 
         RowBox[{"[", 
          RowBox[{"All", ",", 
           RowBox[{"1", ";;", 
            RowBox[{"(", 
             RowBox[{
              RowBox[{"Length", "[", "labels", "]"}], "-", "1"}], ")"}]}]}], 
          "]"}], "]"}], ")"}]}]}], ";", "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{
       RowBox[{"{", 
        RowBox[{
         RowBox[{"#", "[", 
          RowBox[{"[", "1", "]"}], "]"}], ",", 
         RowBox[{"Sqrt", "[", 
          RowBox[{
           RowBox[{"#", "[", 
            RowBox[{"[", "2", "]"}], "]"}], "/", "maxPop"}], "]"}]}], "}"}], 
       "&"}], "/@", "chartAndPop"}]}]}], "\[IndentingNewLine]", 
   "]"}]}]}], "Input",
 CellChangeTimes->{{3.728326943204558*^9, 3.728327114790044*^9}, {
   3.7283272648424253`*^9, 3.7283272803599157`*^9}, {3.728329176816496*^9, 
   3.728329186251896*^9}, {3.7283292309477243`*^9, 3.72832928121644*^9}, {
   3.728332687448422*^9, 3.728332755146597*^9}, {3.728332968811112*^9, 
   3.728333053636868*^9}, {3.728333341955595*^9, 3.7283333775064583`*^9}, {
   3.7283334846160717`*^9, 3.72833355756535*^9}, {3.72833372522782*^9, 
   3.72833377344144*^9}, {3.728333815149301*^9, 3.728333853811116*^9}, {
   3.7283342766942673`*^9, 3.7283342813990593`*^9}, {3.7283343120592318`*^9, 
   3.728334335988242*^9}, {3.72833437345467*^9, 3.72833443150733*^9}, {
   3.7283344957065897`*^9, 3.728334508239711*^9}, {3.728336807601453*^9, 
   3.728336807824024*^9}, {3.728392175955579*^9, 3.728392181500003*^9}, {
   3.728392650641917*^9, 3.728392744336775*^9}, {3.728393502036488*^9, 
   3.728393516231666*^9}, {3.7283936790112333`*^9, 3.728393687052297*^9}, {
   3.728393923795252*^9, 3.728393927629265*^9}, {3.728394308030793*^9, 
   3.728394309900206*^9}, {3.7283955451991863`*^9, 3.7283955639357862`*^9}, {
   3.728395634531886*^9, 3.728395644298649*^9}, {3.728395690875722*^9, 
   3.7283957323207617`*^9}, {3.728397191053947*^9, 3.728397191226152*^9}, {
   3.7284175449422293`*^9, 3.72841755694671*^9}, {3.7284176804122553`*^9, 
   3.728417695614478*^9}, {3.728490669498444*^9, 3.728490669658291*^9}, {
   3.728490724021783*^9, 3.7284907263816977`*^9}, {3.728491377190771*^9, 
   3.7284913818604918`*^9}, {3.728492374620162*^9, 3.72849237609617*^9}, {
   3.728492418329426*^9, 3.728492432190857*^9}, {3.728492463991137*^9, 
   3.728492504602594*^9}, 3.728492560225277*^9, {3.728494412114482*^9, 
   3.728494432060635*^9}, {3.728495684623972*^9, 3.7284956847924843`*^9}, {
   3.728495951775135*^9, 3.72849596304009*^9}, {3.7284959992402687`*^9, 
   3.7284960085779448`*^9}, {3.7284962381122227`*^9, 3.728496239144088*^9}, {
   3.728496355700532*^9, 3.7284963583269377`*^9}, {3.728496679578823*^9, 
   3.728496681236289*^9}, {3.728496749267359*^9, 3.728496816877953*^9}, {
   3.72849691521812*^9, 3.728496945731598*^9}, {3.72849702332996*^9, 
   3.728497040161008*^9}, {3.72849707484895*^9, 3.728497095804656*^9}, {
   3.728497243282737*^9, 3.728497269620007*^9}, {3.7284973370763617`*^9, 
   3.728497375480856*^9}, {3.728497484749133*^9, 3.728497525078752*^9}, {
   3.7284975765972*^9, 3.728497577468898*^9}, {3.728497614382655*^9, 
   3.728497617700654*^9}, {3.728497657301201*^9, 3.72849782285634*^9}, {
   3.728566744644655*^9, 3.728566751641177*^9}, {3.7285668117011843`*^9, 
   3.728566815731133*^9}, {3.7285668697570353`*^9, 3.728566879919052*^9}, {
   3.728567210423546*^9, 3.7285672106223297`*^9}, {3.728567410136145*^9, 
   3.728567412270812*^9}, {3.728567444867428*^9, 3.728567447531365*^9}, {
   3.728567569323874*^9, 3.728567570882004*^9}, {3.728569338028398*^9, 
   3.7285693382509823`*^9}, {3.728601447986496*^9, 3.728601448210157*^9}, 
   3.728603740698246*^9, {3.728604051762437*^9, 3.728604059042494*^9}, {
   3.728604297228775*^9, 3.728604298531534*^9}, {3.72860469179161*^9, 
   3.728604697668621*^9}, {3.728604975321335*^9, 3.7286049760403967`*^9}, {
   3.728651715581881*^9, 3.728651721171255*^9}, {3.7286517707693377`*^9, 
   3.728651770939734*^9}, {3.7286518350080748`*^9, 3.728651836807536*^9}, {
   3.7286519961653748`*^9, 3.728652000785906*^9}, {3.7286520701302156`*^9, 
   3.728652072298835*^9}, {3.728652227671226*^9, 3.728652230625249*^9}, 
   3.728653064870328*^9, {3.7286541867581043`*^9, 3.72865419838766*^9}, {
   3.728654233333618*^9, 3.72865423658466*^9}, {3.728654328940135*^9, 
   3.728654331538333*^9}, {3.728656002469954*^9, 3.728656007521349*^9}, 
   3.728656424952304*^9, {3.728656780441863*^9, 3.7286567807531776`*^9}, {
   3.728658844391471*^9, 3.728658844600339*^9}, {3.728659462314067*^9, 
   3.7286594646801777`*^9}, {3.7286603949425583`*^9, 
   3.7286604149524727`*^9}, {3.7286627130644693`*^9, 3.728662713331821*^9}, {
   3.7286635997952547`*^9, 3.7286636048331957`*^9}, {3.7286649876409388`*^9, 
   3.728664990180373*^9}, {3.7286652977094517`*^9, 3.728665297922164*^9}, 
   3.728665349414633*^9, {3.728670388941141*^9, 3.728670389189889*^9}, {
   3.728672579472892*^9, 3.728672591205332*^9}, {3.728672937387883*^9, 
   3.728672942438286*^9}, {3.72867351022372*^9, 3.728673510488492*^9}, {
   3.7286751563643627`*^9, 3.728675156711937*^9}, {3.728749784180561*^9, 
   3.7287497947086906`*^9}, {3.728941219700539*^9, 3.7289412487710543`*^9}, {
   3.7289413709049397`*^9, 3.72894137108816*^9}, {3.7289957307726994`*^9, 
   3.728995750258235*^9}, {3.7289957921062593`*^9, 3.728995796482744*^9}, {
   3.728995864388196*^9, 3.728995865244946*^9}, {3.7289960117366457`*^9, 
   3.7289960135400553`*^9}, {3.728996091179722*^9, 3.728996092351349*^9}, {
   3.728996203812408*^9, 3.7289962346649103`*^9}, {3.728996353423512*^9, 
   3.728996353946418*^9}, {3.7289964313965178`*^9, 3.72899649377738*^9}, {
   3.728996589424657*^9, 3.72899659191605*^9}, {3.72900473321946*^9, 
   3.7290047402593937`*^9}},ExpressionUUID->"6bef33b5-033f-4d8b-aed7-\
63185bbfb214"]
}, Closed]],

Cell[CellGroupData[{

Cell["Load Data", "Chapter",
 CellChangeTimes->{{3.728567265596026*^9, 
  3.7285672694841337`*^9}},ExpressionUUID->"82785af7-1316-4a9c-b0ab-\
a724d40fb99f"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{
  RowBox[{"(*", 
   RowBox[{
   "Subset", " ", "datasets", " ", "to", " ", "export", " ", "a", " ", 
    "specific", " ", "set", " ", "of", " ", "frames"}], "*)"}], 
  "\[IndentingNewLine]", 
  RowBox[{
   RowBox[{
    RowBox[{"framesRange", "=", 
     RowBox[{"{", 
      RowBox[{"1", ",", "2250"}], "}"}]}], ";"}], "\[IndentingNewLine]", 
   RowBox[{"(*", 
    RowBox[{
     RowBox[{"User", "-", 
      RowBox[{
      "Defined", " ", "data", " ", "range", " ", "for", " ", "frames"}]}], 
     ",", " ", 
     RowBox[{"and", " ", "aesthetic", " ", "parameters"}]}], "*)"}], 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"genotypesIndicesToAggregate", "=", 
     RowBox[{"{", "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{"{", 
        RowBox[{"\"\<Drive (HH)\>\"", ",", 
         RowBox[{"{", "6", "}"}]}], "}"}], ",", "\[IndentingNewLine]", 
       RowBox[{"{", 
        RowBox[{"\"\<Heterozygous (WH)\>\"", ",", 
         RowBox[{"{", "2", "}"}]}], "}"}], ",", "\[IndentingNewLine]", 
       RowBox[{"{", 
        RowBox[{"\"\<Wild (WW)\>\"", ",", 
         RowBox[{"{", "1", "}"}]}], "}"}], ",", "\[IndentingNewLine]", 
       RowBox[{"{", 
        RowBox[{"\"\<Heterozygous (WE)\>\"", ",", 
         RowBox[{"{", "3", "}"}]}], "}"}], ",", "\[IndentingNewLine]", 
       RowBox[{"{", 
        RowBox[{"\"\<Immunizing Reversal (EE)\>\"", ",", 
         RowBox[{"{", "10", "}"}]}], "}"}], ",", "\[IndentingNewLine]", 
       RowBox[{"{", 
        RowBox[{"\"\<Heterozygous (HE)\>\"", ",", 
         RowBox[{"{", "7", "}"}]}], "}"}], ",", "\[IndentingNewLine]", 
       RowBox[{"{", 
        RowBox[{"\"\<Resistant (R and B)\>\"", ",", 
         RowBox[{"{", 
          RowBox[{
          "4", ",", "8", ",", "9", ",", "11", ",", "12", ",", "13", ",", "14",
            ",", "15"}], "}"}]}], "}"}]}], "\[IndentingNewLine]", "}"}]}], 
    ";"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{
     RowBox[{"{", 
      RowBox[{
      "frameDimensions", ",", "scaler", ",", "resolution", ",", "colorScheme",
        ",", "nodeScaler"}], "}"}], "=", 
     RowBox[{"{", 
      RowBox[{
       RowBox[{"{", 
        RowBox[{"2560", ",", "1440"}], "}"}], ",", "3.5", ",", "500", ",", 
       "\"\<LakeColors\>\"", ",", "1"}], "}"}]}], ";"}], 
   "\[IndentingNewLine]", 
   RowBox[{"(*", 
    RowBox[{
    "Import", " ", "data", " ", "and", " ", "calculate", " ", "necessary", 
     " ", "values"}], "*)"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{
     RowBox[{"{", 
      RowBox[{
       RowBox[{"{", 
        RowBox[{"maleDatasets", ",", "femaleDatasets"}], "}"}], ",", 
       RowBox[{"{", 
        RowBox[{"genotypes", ",", "ticksMax", ",", 
         RowBox[{"{", 
          RowBox[{"maleMax", ",", "femaleMax"}], "}"}]}], "}"}]}], "}"}], "=", 
     RowBox[{"ImportAndReshapeMosquitoDatasets", "[", 
      RowBox[{"\"\<./OUT_ERACR_CPP/ERACRCornersDeterministic/0001\>\"", ",", 
       RowBox[{"{", 
        RowBox[{"\"\<ADM\>\"", ",", "\"\<AF1\>\""}], "}"}]}], "]"}]}], ";"}], 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{
     RowBox[{"{", 
      RowBox[{"cities", ",", "transitionsMatrix"}], "}"}], "=", 
     RowBox[{"ImportGeoCoordinatesAndKernel", "[", 
      RowBox[{
      "\"\<./GeoLandscapes/FiveCities_Coordinates.csv\>\"", ",", 
       "\"\<./GeoLandscapes/FiveCities_Kernel.csv\>\""}], "]"}]}], ";"}], 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{
     RowBox[{"{", 
      RowBox[{
      "outputFolder", ",", "outputBarCharts", ",", "outputFlow", ",", 
       "outputNetworks", ",", "outputPopCounts", ",", "outputFullFrames"}], 
      "}"}], "=", 
     RowBox[{"{", 
      RowBox[{
      "\"\<./RASTERS_ERACR\>\"", ",", "\"\</BarCharts/\>\"", ",", 
       "\"\</Flow/\>\"", ",", "\"\</Networks/\>\"", ",", 
       "\"\</PopCounts/\>\"", ",", "\"\</FullFrames/\>\""}], "}"}]}], ";"}], 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{
     RowBox[{"{", 
      RowBox[{
      "baseCounts", ",", "baseDays", ",", "baseBarCharts", ",", "basePopDyn", 
       ",", "baseNetworks", ",", "baseFullFrames"}], "}"}], "=", 
     RowBox[{"{", 
      RowBox[{
      "\"\<PopCount\>\"", ",", "\"\<DayCount\>\"", ",", "\"\<BarCharts\>\"", 
       ",", "\"\<Flow\>\"", ",", "\"\<Networks\>\"", ",", 
       "\"\<FullFrame\>\""}], "}"}]}], ";"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"{", 
     RowBox[{
      RowBox[{"Range", "[", 
       RowBox[{"Length", "[", "genotypes", "]"}], "]"}], ",", "genotypes"}], 
     "}"}], "//", "Transpose"}], "\[IndentingNewLine]", 
   RowBox[{"(*", 
    RowBox[{"Aggregate", " ", "dataset"}], "*)"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"totalPopulationDatasets", "=", 
     RowBox[{"(", 
      RowBox[{"maleDatasets", "+", "femaleDatasets"}], ")"}]}], ";"}], 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{
     RowBox[{"{", 
      RowBox[{"aggregatedLabels", ",", "aggregatedPopulations"}], "}"}], "=", 
     
     RowBox[{"AggregatePopulationByGenotypeIndices", "[", 
      RowBox[{"totalPopulationDatasets", ",", "genotypesIndicesToAggregate"}],
       "]"}]}], ";"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"aggregatedPopulationsAcrossNodes", "=", 
     RowBox[{
     "AggregatePopulationAcrossNodes", "[", "aggregatedPopulations", "]"}]}], 
    ";"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{
     RowBox[{"{", 
      RowBox[{"labels", ",", "colors"}], "}"}], "=", 
     RowBox[{"GenerateColorPalette", "[", 
      RowBox[{"aggregatedLabels", ",", "colorScheme"}], "]"}]}], ";"}], 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"maxPop", "=", 
     RowBox[{
      RowBox[{"aggregatedPopulationsAcrossNodes", "[", 
       RowBox[{"[", 
        RowBox[{"All", ",", 
         RowBox[{"Length", "[", "labels", "]"}]}], "]"}], "]"}], "//", 
      "Max"}]}], ";"}], "\[IndentingNewLine]", 
   RowBox[{"(*", 
    RowBox[{"Manual", " ", "Palette", " ", "Extension"}], "*)"}], 
   "\[IndentingNewLine]", 
   RowBox[{"colors", "=", 
    RowBox[{"ReplacePart", "[", 
     RowBox[{"colors", ",", 
      RowBox[{"{", 
       RowBox[{
        RowBox[{"6", "\[Rule]", 
         RowBox[{"Darker", "[", 
          RowBox[{"White", ",", ".05"}], "]"}]}], ",", 
        RowBox[{"7", "\[Rule]", 
         RowBox[{"Darker", "[", 
          RowBox[{"White", ",", ".15"}], "]"}]}]}], "}"}]}], 
     "]"}]}]}]}]], "Input",
 CellChangeTimes->{{3.728327116636553*^9, 3.7283271552881823`*^9}, {
   3.7283272512471857`*^9, 3.728327255969289*^9}, {3.728329188329093*^9, 
   3.728329194008501*^9}, {3.728329305643834*^9, 3.728329319008731*^9}, 
   3.728329379102147*^9, {3.728332513706379*^9, 3.72833257962569*^9}, {
   3.7283327252458677`*^9, 3.728332729227261*^9}, {3.72833301730451*^9, 
   3.728333061195413*^9}, {3.728333228776382*^9, 3.728333275515081*^9}, {
   3.728333595498876*^9, 3.728333661192999*^9}, {3.728333716568172*^9, 
   3.728333723769451*^9}, {3.728333782006322*^9, 3.728333803182967*^9}, {
   3.728333878826664*^9, 3.728333885323452*^9}, {3.728334043653051*^9, 
   3.728334132378693*^9}, {3.72833428731177*^9, 3.728334288160462*^9}, {
   3.728334538162325*^9, 3.7283346102210197`*^9}, {3.728334831663128*^9, 
   3.728334885502347*^9}, {3.728336522312674*^9, 3.7283365225428553`*^9}, {
   3.7283368806208563`*^9, 3.728336929292889*^9}, {3.728336980191895*^9, 
   3.728336994391659*^9}, {3.728337027649765*^9, 3.7283370885146713`*^9}, {
   3.728337546621557*^9, 3.7283375469932823`*^9}, {3.7283377480304193`*^9, 
   3.728337820410749*^9}, {3.728337949843012*^9, 3.7283379599843693`*^9}, {
   3.728392198870007*^9, 3.728392199223555*^9}, {3.728392572540414*^9, 
   3.728392637142479*^9}, {3.728392796305211*^9, 3.7283928264515953`*^9}, {
   3.72839337459499*^9, 3.7283934209025106`*^9}, 3.728393465960044*^9, {
   3.728393790339261*^9, 3.728393791083682*^9}, 3.728393826311481*^9, {
   3.72839427116885*^9, 3.728394271753118*^9}, {3.7283946000196943`*^9, 
   3.728394622632185*^9}, {3.7283948241385517`*^9, 3.7283948325171022`*^9}, {
   3.7283948689795237`*^9, 3.7283948750359583`*^9}, {3.728395551762005*^9, 
   3.728395628918524*^9}, {3.7283956609441547`*^9, 3.728395667265305*^9}, {
   3.7283957513463297`*^9, 3.728395765904841*^9}, {3.7283967150665073`*^9, 
   3.7283967159069633`*^9}, {3.728396767748198*^9, 3.7283967696942577`*^9}, {
   3.7284129193236103`*^9, 3.728412919435519*^9}, {3.728413886074443*^9, 
   3.72841388615361*^9}, {3.728416373446579*^9, 3.728416373518409*^9}, {
   3.728416753904146*^9, 3.728416762841936*^9}, {3.7284168608700743`*^9, 
   3.728416861091811*^9}, {3.728416947552759*^9, 3.728416949861349*^9}, {
   3.7284170123474073`*^9, 3.728417031636009*^9}, {3.728417149713258*^9, 
   3.728417166533058*^9}, {3.7284176386605453`*^9, 3.728417646578332*^9}, {
   3.7284177027008047`*^9, 3.72841770500952*^9}, {3.7284177609543047`*^9, 
   3.7284177706955338`*^9}, {3.72841799346981*^9, 3.728417995767967*^9}, {
   3.728418041375952*^9, 3.728418045348707*^9}, {3.728418097369568*^9, 
   3.72841809762062*^9}, {3.728418131117367*^9, 3.728418132166346*^9}, {
   3.7284182240103407`*^9, 3.728418225677614*^9}, {3.728490522244253*^9, 
   3.7284905445192833`*^9}, {3.728490619399111*^9, 3.728490622820477*^9}, {
   3.728490747195004*^9, 3.728490786664576*^9}, {3.728490851811453*^9, 
   3.7284908605922832`*^9}, {3.728492623272765*^9, 3.72849263467437*^9}, {
   3.72849546808438*^9, 3.72849548157856*^9}, {3.728496408837493*^9, 
   3.728496412269315*^9}, {3.7284978605425386`*^9, 3.728497864002405*^9}, {
   3.7284979858638163`*^9, 3.728497991953371*^9}, {3.728566983613159*^9, 
   3.728566983711122*^9}, {3.728568515754961*^9, 3.7285685277053623`*^9}, {
   3.728568581920233*^9, 3.728568630293599*^9}, {3.7285686812208138`*^9, 
   3.7285686878736*^9}, {3.7285782002809*^9, 3.728578202950485*^9}, {
   3.7285784601083393`*^9, 3.728578461843445*^9}, {3.728578751714657*^9, 
   3.7285787534486628`*^9}, {3.728579164220951*^9, 3.728579167276547*^9}, {
   3.728580479428567*^9, 3.7285804828101797`*^9}, {3.72858939480801*^9, 
   3.728589397957958*^9}, {3.728603024290613*^9, 3.728603026431715*^9}, {
   3.728603750181342*^9, 3.728603752979291*^9}, {3.7286045005412693`*^9, 
   3.728604501754023*^9}, {3.728604963066873*^9, 3.728604963417745*^9}, {
   3.728605540767499*^9, 3.7286055444914923`*^9}, {3.728605959176421*^9, 
   3.728605962876178*^9}, {3.728606955127194*^9, 3.728606961451954*^9}, {
   3.728651388045189*^9, 3.728651390744772*^9}, 3.72865172672084*^9, {
   3.7286518588715563`*^9, 3.728651859217589*^9}, {3.72865223445007*^9, 
   3.7286522345357943`*^9}, {3.728653236029973*^9, 3.7286532400257177`*^9}, {
   3.7286538737187757`*^9, 3.7286538831419287`*^9}, {3.728662601169487*^9, 
   3.728662601269418*^9}, {3.728662664312787*^9, 3.728662699021627*^9}, {
   3.728662752868222*^9, 3.728662754043086*^9}, {3.7286640399021473`*^9, 
   3.7286640505750847`*^9}, {3.728669802728712*^9, 3.728669863290009*^9}, {
   3.728669893439988*^9, 3.728669914088904*^9}, {3.7286731364990273`*^9, 
   3.728673177841728*^9}, {3.728673538677856*^9, 3.728673538903665*^9}, {
   3.728742473759261*^9, 3.7287424740624523`*^9}, {3.728853152791553*^9, 
   3.7288531532448797`*^9}, {3.728853653431014*^9, 3.728853653510724*^9}, {
   3.728853949483267*^9, 3.7288539500123873`*^9}, {3.728854137060046*^9, 
   3.728854144345894*^9}, {3.728855006164719*^9, 3.728855009916059*^9}, {
   3.728910412822548*^9, 3.7289104158502913`*^9}, {3.728927053388077*^9, 
   3.728927068665525*^9}, {3.728927133136668*^9, 3.728927143154904*^9}, {
   3.728927179676564*^9, 3.728927201070212*^9}, {3.728927401242181*^9, 
   3.728927429938491*^9}, {3.7289276769813223`*^9, 3.728927705707827*^9}, {
   3.728928081613021*^9, 3.7289280861595716`*^9}, {3.72892846854987*^9, 
   3.728928468617538*^9}, {3.728939599675844*^9, 3.728939600623076*^9}, {
   3.728939708339991*^9, 3.728939725720945*^9}, 3.728939772649695*^9, {
   3.7289398374697227`*^9, 3.728939839901567*^9}, {3.728939901319989*^9, 
   3.72893990319783*^9}, {3.728939989298233*^9, 3.728939989372077*^9}, {
   3.7289400201981173`*^9, 3.728940144245357*^9}, {3.728940331719266*^9, 
   3.728940386076963*^9}, {3.728940838198268*^9, 3.7289408382670116`*^9}, {
   3.728941019088278*^9, 3.728941024293159*^9}, {3.7289410598094883`*^9, 
   3.728941077339478*^9}, {3.7289411119424667`*^9, 3.728941118671929*^9}, {
   3.72894115401201*^9, 3.728941177447361*^9}, {3.728941311086001*^9, 
   3.7289413494532146`*^9}, {3.7289414930079117`*^9, 3.728941494989101*^9}, {
   3.728941529832205*^9, 3.728941586336563*^9}, {3.728941674815852*^9, 
   3.728941735003621*^9}, {3.728941911338529*^9, 3.728941971818348*^9}, {
   3.728942033737039*^9, 3.72894207803237*^9}, {3.728942110384225*^9, 
   3.72894211063419*^9}, {3.728942156953137*^9, 3.728942157381406*^9}, {
   3.728942187577836*^9, 3.728942189157645*^9}, {3.728942225910606*^9, 
   3.728942228567069*^9}, {3.728942768160615*^9, 3.728942784935046*^9}, {
   3.728942891932707*^9, 3.728942903458653*^9}, {3.728943072628469*^9, 
   3.728943072732839*^9}, {3.7289432455462914`*^9, 3.72894325187066*^9}, {
   3.7289433486348267`*^9, 3.728943350432177*^9}, 3.728995111025558*^9, {
   3.728995835198359*^9, 3.728995836621003*^9}, 3.728996107145178*^9, {
   3.728996167146985*^9, 3.728996167482102*^9}, {3.728997867428652*^9, 
   3.728997872290917*^9}, {3.728998850474172*^9, 3.728998854098871*^9}, {
   3.7289999183943787`*^9, 3.728999924192894*^9}, {3.729001403744197*^9, 
   3.729001407011921*^9}, {3.7290034984956837`*^9, 3.729003505338266*^9}, {
   3.72900360288481*^9, 3.729003605308737*^9}, {3.729004628487089*^9, 
   3.729004655548914*^9}, {3.729004696500369*^9, 3.729004697773459*^9}, {
   3.7290047510509987`*^9, 3.729004752802956*^9}, {3.7290052497519217`*^9, 
   3.7290052504248257`*^9}, {3.729011399279541*^9, 3.729011406308004*^9}, {
   3.7290195443982897`*^9, 3.729019558932803*^9}, {3.7290195906094217`*^9, 
   3.729019598842108*^9}},ExpressionUUID->"eaf3faab-5169-4026-bc61-\
e73ab018b0be"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{
   RowBox[{"{", 
    RowBox[{"1", ",", "\<\"WW\"\>"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"2", ",", "\<\"WH\"\>"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"3", ",", "\<\"WE\"\>"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"4", ",", "\<\"WR\"\>"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"5", ",", "\<\"WB\"\>"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"6", ",", "\<\"HH\"\>"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"7", ",", "\<\"HE\"\>"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"8", ",", "\<\"HR\"\>"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"9", ",", "\<\"HB\"\>"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"10", ",", "\<\"EE\"\>"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"11", ",", "\<\"ER\"\>"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"12", ",", "\<\"EB\"\>"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"13", ",", "\<\"RR\"\>"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"14", ",", "\<\"RB\"\>"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"15", ",", "\<\"BB\"\>"}], "}"}]}], "}"}]], "Output",
 CellChangeTimes->{3.72901960827389*^9, 
  3.729022910271831*^9},ExpressionUUID->"72788881-3ba2-4519-9e77-\
aad7a08d664d"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{
   InterpretationBox[
    ButtonBox[
     TooltipBox[
      GraphicsBox[{
        {GrayLevel[0], RectangleBox[{0, 0}]}, 
        {GrayLevel[0], RectangleBox[{1, -1}]}, 
        {RGBColor[0.293416, 0.0574044, 0.529412], 
         RectangleBox[{0, -1}, {2, 1}]}},
       AspectRatio->1,
       Frame->True,
       FrameStyle->RGBColor[
        0.19561066666666668`, 0.0382696, 0.35294133333333333`],
       FrameTicks->None,
       ImageSize->
        Dynamic[{
         Automatic, 1.35 CurrentValue["FontCapHeight"]/AbsoluteCurrentValue[
          Magnification]}],
       PlotRangePadding->None],
      "RGBColor[0.293416, 0.0574044, 0.529412]"],
     Appearance->None,
     BaseStyle->{},
     BaselinePosition->Baseline,
     ButtonFunction:>With[{Typeset`box$ = EvaluationBox[]}, 
       If[
        Not[
         AbsoluteCurrentValue["Deployed"]], 
        SelectionMove[Typeset`box$, All, Expression]; 
        FrontEnd`Private`$ColorSelectorInitialAlpha = 1; 
        FrontEnd`Private`$ColorSelectorInitialColor = 
         RGBColor[0.293416, 0.0574044, 0.529412]; 
        FrontEnd`Private`$ColorSelectorUseMakeBoxes = True; 
        MathLink`CallFrontEnd[
          FrontEnd`AttachCell[Typeset`box$, 
           FrontEndResource["RGBColorValueSelector"], {0, {Left, Bottom}}, {
           Left, Top}, 
           "ClosingActions" -> {
            "SelectionDeparture", "ParentChanged", "EvaluatorQuit"}]]]],
     DefaultBaseStyle->{},
     Evaluator->Automatic,
     Method->"Preemptive"],
    RGBColor[0.293416, 0.0574044, 0.529412],
    Editable->False,
    Selectable->False], ",", 
   InterpretationBox[
    ButtonBox[
     TooltipBox[
      GraphicsBox[{
        {GrayLevel[0], RectangleBox[{0, 0}]}, 
        {GrayLevel[0], RectangleBox[{1, -1}]}, 
        {RGBColor[0.4286185, 0.2924847, 0.7194555], 
         RectangleBox[{0, -1}, {2, 1}]}},
       AspectRatio->1,
       Frame->True,
       FrameStyle->RGBColor[
        0.2857456666666667, 0.1949898, 0.47963700000000004`],
       FrameTicks->None,
       ImageSize->
        Dynamic[{
         Automatic, 1.35 CurrentValue["FontCapHeight"]/AbsoluteCurrentValue[
          Magnification]}],
       PlotRangePadding->None],
      "RGBColor[0.4286185, 0.2924847, 0.7194555]"],
     Appearance->None,
     BaseStyle->{},
     BaselinePosition->Baseline,
     ButtonFunction:>With[{Typeset`box$ = EvaluationBox[]}, 
       If[
        Not[
         AbsoluteCurrentValue["Deployed"]], 
        SelectionMove[Typeset`box$, All, Expression]; 
        FrontEnd`Private`$ColorSelectorInitialAlpha = 1; 
        FrontEnd`Private`$ColorSelectorInitialColor = 
         RGBColor[0.4286185, 0.2924847, 0.7194555]; 
        FrontEnd`Private`$ColorSelectorUseMakeBoxes = True; 
        MathLink`CallFrontEnd[
          FrontEnd`AttachCell[Typeset`box$, 
           FrontEndResource["RGBColorValueSelector"], {0, {Left, Bottom}}, {
           Left, Top}, 
           "ClosingActions" -> {
            "SelectionDeparture", "ParentChanged", "EvaluatorQuit"}]]]],
     DefaultBaseStyle->{},
     Evaluator->Automatic,
     Method->"Preemptive"],
    RGBColor[0.4286185, 0.2924847, 0.7194555],
    Editable->False,
    Selectable->False], ",", 
   InterpretationBox[
    ButtonBox[
     TooltipBox[
      GraphicsBox[{
        {GrayLevel[0], RectangleBox[{0, 0}]}, 
        {GrayLevel[0], RectangleBox[{1, -1}]}, 
        {RGBColor[0.563821, 0.527565, 0.909499], 
         RectangleBox[{0, -1}, {2, 1}]}},
       AspectRatio->1,
       Frame->True,
       FrameStyle->RGBColor[
        0.3758806666666667, 0.35170999999999997`, 0.6063326666666666],
       FrameTicks->None,
       ImageSize->
        Dynamic[{
         Automatic, 1.35 CurrentValue["FontCapHeight"]/AbsoluteCurrentValue[
          Magnification]}],
       PlotRangePadding->None],
      "RGBColor[0.563821, 0.527565, 0.909499]"],
     Appearance->None,
     BaseStyle->{},
     BaselinePosition->Baseline,
     ButtonFunction:>With[{Typeset`box$ = EvaluationBox[]}, 
       If[
        Not[
         AbsoluteCurrentValue["Deployed"]], 
        SelectionMove[Typeset`box$, All, Expression]; 
        FrontEnd`Private`$ColorSelectorInitialAlpha = 1; 
        FrontEnd`Private`$ColorSelectorInitialColor = 
         RGBColor[0.563821, 0.527565, 0.909499]; 
        FrontEnd`Private`$ColorSelectorUseMakeBoxes = True; 
        MathLink`CallFrontEnd[
          FrontEnd`AttachCell[Typeset`box$, 
           FrontEndResource["RGBColorValueSelector"], {0, {Left, Bottom}}, {
           Left, Top}, 
           "ClosingActions" -> {
            "SelectionDeparture", "ParentChanged", "EvaluatorQuit"}]]]],
     DefaultBaseStyle->{},
     Evaluator->Automatic,
     Method->"Preemptive"],
    RGBColor[0.563821, 0.527565, 0.909499],
    Editable->False,
    Selectable->False], ",", 
   InterpretationBox[
    ButtonBox[
     TooltipBox[
      GraphicsBox[{
        {GrayLevel[0], RectangleBox[{0, 0}]}, 
        {GrayLevel[0], RectangleBox[{1, -1}]}, 
        {RGBColor[0.663226, 0.6872815, 0.9117649999999999], 
         RectangleBox[{0, -1}, {2, 1}]}},
       AspectRatio->1,
       Frame->True,
       FrameStyle->RGBColor[
        0.4421506666666667, 0.45818766666666666`, 0.6078433333333333],
       FrameTicks->None,
       ImageSize->
        Dynamic[{
         Automatic, 1.35 CurrentValue["FontCapHeight"]/AbsoluteCurrentValue[
          Magnification]}],
       PlotRangePadding->None],
      "RGBColor[0.663226, 0.6872815, 0.9117649999999999]"],
     Appearance->None,
     BaseStyle->{},
     BaselinePosition->Baseline,
     ButtonFunction:>With[{Typeset`box$ = EvaluationBox[]}, 
       If[
        Not[
         AbsoluteCurrentValue["Deployed"]], 
        SelectionMove[Typeset`box$, All, Expression]; 
        FrontEnd`Private`$ColorSelectorInitialAlpha = 1; 
        FrontEnd`Private`$ColorSelectorInitialColor = 
         RGBColor[0.663226, 0.6872815, 0.9117649999999999]; 
        FrontEnd`Private`$ColorSelectorUseMakeBoxes = True; 
        MathLink`CallFrontEnd[
          FrontEnd`AttachCell[Typeset`box$, 
           FrontEndResource["RGBColorValueSelector"], {0, {Left, Bottom}}, {
           Left, Top}, 
           "ClosingActions" -> {
            "SelectionDeparture", "ParentChanged", "EvaluatorQuit"}]]]],
     DefaultBaseStyle->{},
     Evaluator->Automatic,
     Method->"Preemptive"],
    RGBColor[0.663226, 0.6872815, 0.9117649999999999],
    Editable->False,
    Selectable->False], ",", 
   InterpretationBox[
    ButtonBox[
     TooltipBox[
      GraphicsBox[{
        {GrayLevel[0], RectangleBox[{0, 0}]}, 
        {GrayLevel[0], RectangleBox[{1, -1}]}, 
        {RGBColor[0.762631, 0.846998, 0.914031], 
         RectangleBox[{0, -1}, {2, 1}]}},
       AspectRatio->1,
       Frame->True,
       FrameStyle->RGBColor[
        0.5084206666666666, 0.5646653333333334, 0.6093540000000001],
       FrameTicks->None,
       ImageSize->
        Dynamic[{
         Automatic, 1.35 CurrentValue["FontCapHeight"]/AbsoluteCurrentValue[
          Magnification]}],
       PlotRangePadding->None],
      "RGBColor[0.762631, 0.846998, 0.914031]"],
     Appearance->None,
     BaseStyle->{},
     BaselinePosition->Baseline,
     ButtonFunction:>With[{Typeset`box$ = EvaluationBox[]}, 
       If[
        Not[
         AbsoluteCurrentValue["Deployed"]], 
        SelectionMove[Typeset`box$, All, Expression]; 
        FrontEnd`Private`$ColorSelectorInitialAlpha = 1; 
        FrontEnd`Private`$ColorSelectorInitialColor = 
         RGBColor[0.762631, 0.846998, 0.914031]; 
        FrontEnd`Private`$ColorSelectorUseMakeBoxes = True; 
        MathLink`CallFrontEnd[
          FrontEnd`AttachCell[Typeset`box$, 
           FrontEndResource["RGBColorValueSelector"], {0, {Left, Bottom}}, {
           Left, Top}, 
           "ClosingActions" -> {
            "SelectionDeparture", "ParentChanged", "EvaluatorQuit"}]]]],
     DefaultBaseStyle->{},
     Evaluator->Automatic,
     Method->"Preemptive"],
    RGBColor[0.762631, 0.846998, 0.914031],
    Editable->False,
    Selectable->False], ",", 
   InterpretationBox[
    ButtonBox[
     TooltipBox[
      GraphicsBox[{
        {GrayLevel[0], RectangleBox[{0, 0}]}, 
        {GrayLevel[0], RectangleBox[{1, -1}]}, 
        {RGBColor[0.95, 0.95, 0.95], RectangleBox[{0, -1}, {2, 1}]}},
       AspectRatio->1,
       Frame->True,
       FrameStyle->RGBColor[
        0.6333333333333333, 0.6333333333333333, 0.6333333333333333],
       FrameTicks->None,
       ImageSize->
        Dynamic[{
         Automatic, 1.35 CurrentValue["FontCapHeight"]/AbsoluteCurrentValue[
          Magnification]}],
       PlotRangePadding->None],
      "RGBColor[0.95, 0.95, 0.95]"],
     Appearance->None,
     BaseStyle->{},
     BaselinePosition->Baseline,
     ButtonFunction:>With[{Typeset`box$ = EvaluationBox[]}, 
       If[
        Not[
         AbsoluteCurrentValue["Deployed"]], 
        SelectionMove[Typeset`box$, All, Expression]; 
        FrontEnd`Private`$ColorSelectorInitialAlpha = 1; 
        FrontEnd`Private`$ColorSelectorInitialColor = 
         RGBColor[0.95, 0.95, 0.95]; 
        FrontEnd`Private`$ColorSelectorUseMakeBoxes = True; 
        MathLink`CallFrontEnd[
          FrontEnd`AttachCell[Typeset`box$, 
           FrontEndResource["RGBColorValueSelector"], {0, {Left, Bottom}}, {
           Left, Top}, 
           "ClosingActions" -> {
            "SelectionDeparture", "ParentChanged", "EvaluatorQuit"}]]]],
     DefaultBaseStyle->{},
     Evaluator->Automatic,
     Method->"Preemptive"],
    RGBColor[0.95, 0.95, 0.95],
    Editable->False,
    Selectable->False], ",", 
   InterpretationBox[
    ButtonBox[
     TooltipBox[
      GraphicsBox[{
        {GrayLevel[0], RectangleBox[{0, 0}]}, 
        {GrayLevel[0], RectangleBox[{1, -1}]}, 
        {RGBColor[0.85, 0.85, 0.85], RectangleBox[{0, -1}, {2, 1}]}},
       AspectRatio->1,
       Frame->True,
       FrameStyle->RGBColor[
        0.5666666666666667, 0.5666666666666667, 0.5666666666666667],
       FrameTicks->None,
       ImageSize->
        Dynamic[{
         Automatic, 1.35 CurrentValue["FontCapHeight"]/AbsoluteCurrentValue[
          Magnification]}],
       PlotRangePadding->None],
      "RGBColor[0.85, 0.85, 0.85]"],
     Appearance->None,
     BaseStyle->{},
     BaselinePosition->Baseline,
     ButtonFunction:>With[{Typeset`box$ = EvaluationBox[]}, 
       If[
        Not[
         AbsoluteCurrentValue["Deployed"]], 
        SelectionMove[Typeset`box$, All, Expression]; 
        FrontEnd`Private`$ColorSelectorInitialAlpha = 1; 
        FrontEnd`Private`$ColorSelectorInitialColor = 
         RGBColor[0.85, 0.85, 0.85]; 
        FrontEnd`Private`$ColorSelectorUseMakeBoxes = True; 
        MathLink`CallFrontEnd[
          FrontEnd`AttachCell[Typeset`box$, 
           FrontEndResource["RGBColorValueSelector"], {0, {Left, Bottom}}, {
           Left, Top}, 
           "ClosingActions" -> {
            "SelectionDeparture", "ParentChanged", "EvaluatorQuit"}]]]],
     DefaultBaseStyle->{},
     Evaluator->Automatic,
     Method->"Preemptive"],
    RGBColor[0.85, 0.85, 0.85],
    Editable->False,
    Selectable->False], ",", 
   InterpretationBox[
    ButtonBox[
     TooltipBox[
      GraphicsBox[{
        {GrayLevel[0], RectangleBox[{0, 0}]}, 
        {GrayLevel[0], RectangleBox[{1, -1}]}, 
        {GrayLevel[0], RectangleBox[{0, -1}, {2, 1}]}},
       AspectRatio->1,
       Frame->True,
       FrameStyle->GrayLevel[0.],
       FrameTicks->None,
       ImageSize->
        Dynamic[{
         Automatic, 1.35 CurrentValue["FontCapHeight"]/AbsoluteCurrentValue[
          Magnification]}],
       PlotRangePadding->None],
      "GrayLevel[0]"],
     Appearance->None,
     BaseStyle->{},
     BaselinePosition->Baseline,
     ButtonFunction:>With[{Typeset`box$ = EvaluationBox[]}, 
       If[
        Not[
         AbsoluteCurrentValue["Deployed"]], 
        SelectionMove[Typeset`box$, All, Expression]; 
        FrontEnd`Private`$ColorSelectorInitialAlpha = 1; 
        FrontEnd`Private`$ColorSelectorInitialColor = GrayLevel[0]; 
        FrontEnd`Private`$ColorSelectorUseMakeBoxes = True; 
        MathLink`CallFrontEnd[
          FrontEnd`AttachCell[Typeset`box$, 
           FrontEndResource["GrayLevelColorValueSelector"], {
           0, {Left, Bottom}}, {Left, Top}, 
           "ClosingActions" -> {
            "SelectionDeparture", "ParentChanged", "EvaluatorQuit"}]]]],
     DefaultBaseStyle->{},
     Evaluator->Automatic,
     Method->"Preemptive"],
    GrayLevel[0],
    Editable->False,
    Selectable->False]}], "}"}]], "Output",
 CellChangeTimes->{3.72901960827389*^9, 
  3.729022911995049*^9},ExpressionUUID->"f3b01bdf-9691-47ee-ada0-\
d1cf6ccf5ef7"]
}, Open  ]]
}, Open  ]],

Cell[CellGroupData[{

Cell["Generate Rasters", "Chapter",
 CellChangeTimes->{{3.728567301012096*^9, 
  3.728567305122032*^9}},ExpressionUUID->"45127e10-12ed-4ded-8bb2-\
4057397293ab"],

Cell[CellGroupData[{

Cell["Flow Chart (only needs to be run once)", "Subchapter",
 CellChangeTimes->{{3.728675447425973*^9, 3.7286754521154757`*^9}, {
  3.728675530035922*^9, 
  3.728675537794833*^9}},ExpressionUUID->"4b5b5dcb-6dc9-44a8-9a36-\
494a5a02d1fd"],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{
  RowBox[{"barChartPopDynFrames", "=", 
   RowBox[{"Map", "[", "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{
      RowBox[{"BarChartPopDynamicsFrames", "[", 
       RowBox[{"#", ",", "aggregatedPopulationsAcrossNodes", ",", 
        RowBox[{"{", 
         RowBox[{"colors", ",", 
          RowBox[{
           RowBox[{"aggregatedPopulationsAcrossNodes", "[", 
            RowBox[{"[", 
             RowBox[{"All", ",", 
              RowBox[{"Length", "[", "labels", "]"}]}], "]"}], "]"}], "//", 
           "Max"}], ",", "ticksMax", ",", "frameDimensions", ",", "labels"}], 
         "}"}]}], "]"}], "&"}], ",", "\[IndentingNewLine]", 
     RowBox[{"{", "ticksMax", "}"}]}], "\[IndentingNewLine]", "]"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{"Export", "[", 
  RowBox[{
   RowBox[{
   "outputFolder", "<>", "\"\</Flow/\>\"", "<>", "\"\<FlowFull.png\>\""}], 
   ",", "barChartPopDynFrames", ",", 
   RowBox[{"ImageResolution", "\[Rule]", "300"}], ",", 
   RowBox[{"ImageSize", "\[Rule]", 
    RowBox[{"frameDimensions", "[", 
     RowBox[{"[", "1", "]"}], "]"}]}]}], "]"}]}], "Input",
 CellChangeTimes->{
  3.7289408522984543`*^9, {3.72894091887602*^9, 
   3.7289409194919863`*^9}},ExpressionUUID->"342d9da7-35ba-4524-ae4f-\
d6162ef07f84"],

Cell[BoxData["\<\"./RASTERS_ERACR/Flow/FlowFull.png\"\>"], "Output",
 CellChangeTimes->{
  3.729019727400256*^9},ExpressionUUID->"fa6095aa-a479-4979-8c32-\
4704e675e6b5"]
}, Open  ]]
}, Closed]],

Cell[CellGroupData[{

Cell["Population Counts", "Subchapter",
 CellChangeTimes->{{3.7285673203455*^9, 
  3.728567326837945*^9}},ExpressionUUID->"211a5e2e-7f1a-4027-9073-\
d5f8139bee5d"],

Cell[BoxData[{
 RowBox[{
  RowBox[{"stepSize", "=", "8"}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"Table", "[", "\[IndentingNewLine]", 
   RowBox[{"(*", 
    RowBox[{"Subset", " ", "Data"}], "*)"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{
     RowBox[{"dataRange", "=", 
      RowBox[{"{", 
       RowBox[{"i", ",", 
        RowBox[{"i", "+", "stepSize"}]}], "}"}]}], ";", "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{"{", 
       RowBox[{"subsetPopulations", ",", "subsetPopulationsAccrossNodes"}], 
       "}"}], "=", 
      RowBox[{"SubsetPopulations", "[", 
       RowBox[{
        RowBox[{"{", 
         RowBox[{
         "aggregatedPopulations", ",", "aggregatedPopulationsAcrossNodes"}], 
         "}"}], ",", "dataRange"}], "]"}]}], ";", "\[IndentingNewLine]", 
     RowBox[{"(*", 
      RowBox[{"Export", " ", "Frames"}], "*)"}], "\[IndentingNewLine]", 
     RowBox[{"popCountsFrames", "=", 
      RowBox[{"GeneratePopCountsFrames", "[", 
       RowBox[{
        RowBox[{"{", 
         RowBox[{"labels", ",", "colors"}], "}"}], ",", 
        "subsetPopulationsAccrossNodes"}], "]"}]}], ";", 
     "\[IndentingNewLine]", 
     RowBox[{"(*", 
      RowBox[{
       RowBox[{"popCountGridFrames", "=", 
        RowBox[{
         RowBox[{
          RowBox[{"Grid", "[", 
           RowBox[{"{", 
            RowBox[{
             RowBox[{"{", 
              RowBox[{"#", "[", 
               RowBox[{"[", "1", "]"}], "]"}], "}"}], ",", 
             RowBox[{"{", "}"}], ",", 
             RowBox[{"{", "}"}], ",", 
             RowBox[{"{", 
              RowBox[{"#", "[", 
               RowBox[{"[", "2", "]"}], "]"}], "}"}]}], "}"}], "]"}], "&"}], "/@", 
         RowBox[{"Transpose", "[", 
          RowBox[{"{", 
           RowBox[{"dayCounter", ",", "popCountsFrames"}], "}"}], "]"}]}]}], 
       ";"}], "*)"}], "\[IndentingNewLine]", 
     RowBox[{"ExportFrames", "[", 
      RowBox[{"popCountsFrames", ",", "dataRange", ",", 
       RowBox[{"{", 
        RowBox[{"outputFolder", ",", "outputPopCounts", ",", "baseCounts"}], 
        "}"}]}], "]"}], ";", "\[IndentingNewLine]", 
     RowBox[{"dayCounterFrames", "=", 
      RowBox[{
       RowBox[{
        RowBox[{"Style", "[", 
         RowBox[{
          RowBox[{"(", 
           RowBox[{"\"\<Day: \>\"", "<>", 
            RowBox[{"StringPadLeft", "[", 
             RowBox[{
              RowBox[{"ToString", "[", "#", "]"}], ",", "5", ",", 
              "\"\<0\>\""}], "]"}]}], ")"}], ",", "50"}], "]"}], "&"}], "/@", 
       
       RowBox[{"Range", "[", 
        RowBox[{
         RowBox[{"dataRange", "[", 
          RowBox[{"[", "1", "]"}], "]"}], ",", 
         RowBox[{"dataRange", "[", 
          RowBox[{"[", "2", "]"}], "]"}]}], "]"}]}]}], ";", 
     "\[IndentingNewLine]", 
     RowBox[{"ExportFrames", "[", 
      RowBox[{"dayCounterFrames", ",", "dataRange", ",", 
       RowBox[{"{", 
        RowBox[{"outputFolder", ",", "outputPopCounts", ",", "baseDays"}], 
        "}"}]}], "]"}], ";", "\[IndentingNewLine]", 
     RowBox[{"(*", 
      RowBox[{"Clear", " ", "Memory"}], "*)"}], "\[IndentingNewLine]", 
     RowBox[{"ClearSystemCache", "[", "]"}], ";", "\[IndentingNewLine]", 
     RowBox[{"Clear", "[", 
      RowBox[{
      "dataRange", ",", "subsetPopulations", ",", 
       "subsetPopulationsAccrossNodes", ",", "dayCounterFrames", ",", 
       "popCountsFrames"}], "]"}], ";"}], "\[IndentingNewLine]", ",", 
    RowBox[{"{", 
     RowBox[{"i", ",", 
      RowBox[{"framesRange", "[", 
       RowBox[{"[", "1", "]"}], "]"}], ",", 
      RowBox[{
       RowBox[{"framesRange", "[", 
        RowBox[{"[", "2", "]"}], "]"}], "-", "stepSize"}], ",", "stepSize"}], 
     "}"}]}], "]"}], ";"}]}], "Input",
 CellChangeTimes->{{3.728567318057585*^9, 3.7285673185762033`*^9}, {
   3.7286640572535343`*^9, 3.728664084164392*^9}, {3.728664348959845*^9, 
   3.728664374724943*^9}, {3.728664414521009*^9, 3.728664615863657*^9}, {
   3.728665437187715*^9, 3.728665440241418*^9}, {3.728665504174272*^9, 
   3.7286655114764957`*^9}, {3.7286698720076027`*^9, 3.728669874792714*^9}, {
   3.728853331152421*^9, 3.728853397193881*^9}, {3.728853526570937*^9, 
   3.728853526713423*^9}, {3.728853567467815*^9, 3.728853572713142*^9}, 
   3.7289313977739763`*^9},ExpressionUUID->"ebbe4fd9-7958-48ef-851c-\
cfaad5883c7c"]
}, Closed]],

Cell[CellGroupData[{

Cell["Bar Charts", "Subchapter",
 CellChangeTimes->{{3.72856736339316*^9, 
  3.7285673705202417`*^9}},ExpressionUUID->"4830739a-4c06-4add-bf62-\
c008ad9cb10b"],

Cell[BoxData[{
 RowBox[{
  RowBox[{"stepSize", "=", "8"}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"Table", "[", "\[IndentingNewLine]", 
   RowBox[{"(*", 
    RowBox[{"Subset", " ", "Data"}], "*)"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{
     RowBox[{"dataRange", "=", 
      RowBox[{"{", 
       RowBox[{"i", ",", 
        RowBox[{"i", "+", "stepSize"}]}], "}"}]}], ";", "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{"{", 
       RowBox[{"subsetPopulations", ",", "subsetPopulationsAccrossNodes"}], 
       "}"}], "=", 
      RowBox[{"SubsetPopulations", "[", 
       RowBox[{
        RowBox[{"{", 
         RowBox[{
         "aggregatedPopulations", ",", "aggregatedPopulationsAcrossNodes"}], 
         "}"}], ",", "dataRange"}], "]"}]}], ";", "\[IndentingNewLine]", 
     RowBox[{"(*", 
      RowBox[{"Export", " ", "Frames"}], "*)"}], "\[IndentingNewLine]", 
     RowBox[{"barChartFrames", "=", 
      RowBox[{"ParallelMap", "[", "\[IndentingNewLine]", 
       RowBox[{
        RowBox[{
         RowBox[{"BarChartPopCountsFrames", "[", 
          RowBox[{"#", ",", 
           RowBox[{"{", 
            RowBox[{"colors", ",", 
             RowBox[{"Ceiling", "[", 
              RowBox[{"maleMax", "+", "femaleMax"}], "]"}], ",", 
             "frameDimensions"}], "}"}]}], "]"}], "&"}], ",", 
        "\[IndentingNewLine]", "subsetPopulations"}], "\[IndentingNewLine]", 
       "]"}]}], ";", "\[IndentingNewLine]", 
     RowBox[{"ExportFrames", "[", 
      RowBox[{"barChartFrames", ",", "dataRange", ",", 
       RowBox[{"{", 
        RowBox[{
        "outputFolder", ",", "outputBarCharts", ",", "baseBarCharts"}], 
        "}"}]}], "]"}], ";", "\[IndentingNewLine]", 
     RowBox[{"(*", 
      RowBox[{"Clear", " ", "Memory"}], "*)"}], "\[IndentingNewLine]", 
     RowBox[{"ClearSystemCache", "[", "]"}], ";", "\[IndentingNewLine]", 
     RowBox[{"Clear", "[", 
      RowBox[{
      "dataRange", ",", "subsetPopulations", ",", 
       "subsetPopulationsAccrossNodes", ",", "days", ",", "barChartFrames"}], 
      "]"}], ";"}], "\[IndentingNewLine]", ",", 
    RowBox[{"{", 
     RowBox[{"i", ",", 
      RowBox[{"framesRange", "[", 
       RowBox[{"[", "1", "]"}], "]"}], ",", 
      RowBox[{
       RowBox[{"framesRange", "[", 
        RowBox[{"[", "2", "]"}], "]"}], "-", "stepSize"}], ",", "stepSize"}], 
     "}"}]}], "]"}], ";"}]}], "Input",
 CellChangeTimes->{{3.728651844520816*^9, 3.728651844769874*^9}, {
   3.7286699357304373`*^9, 3.728669936685807*^9}, {3.728853291655842*^9, 
   3.728853306434112*^9}, 
   3.72893136728538*^9},ExpressionUUID->"08c719b5-3d7b-4620-88d7-\
93cbf336cb70"]
}, Closed]],

Cell[CellGroupData[{

Cell["Population Dynamics", "Subchapter",
 CellChangeTimes->{{3.728567375656878*^9, 
  3.728567382465563*^9}},ExpressionUUID->"2c88bc1c-b0f5-4663-8b04-\
04b16997ea2c"],

Cell[BoxData[{
 RowBox[{
  RowBox[{"stepSize", "=", "8"}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"Table", "[", "\[IndentingNewLine]", 
   RowBox[{"(*", 
    RowBox[{"Subset", " ", "Data"}], "*)"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{
     RowBox[{"dataRange", "=", 
      RowBox[{"{", 
       RowBox[{"i", ",", 
        RowBox[{"i", "+", "stepSize"}]}], "}"}]}], ";", "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{"{", 
       RowBox[{"subsetPopulations", ",", "subsetPopulationsAccrossNodes"}], 
       "}"}], "=", 
      RowBox[{"SubsetPopulations", "[", 
       RowBox[{
        RowBox[{"{", 
         RowBox[{
         "aggregatedPopulations", ",", "aggregatedPopulationsAcrossNodes"}], 
         "}"}], ",", "dataRange"}], "]"}]}], ";", "\[IndentingNewLine]", 
     RowBox[{"(*", 
      RowBox[{"Export", " ", "Frames"}], "*)"}], "\[IndentingNewLine]", 
     RowBox[{"fullRaster", "=", 
      RowBox[{
      "Import", "[", "\"\<./RASTERS_ERACR/Flow/FlowFull.png\>\"", "]"}]}], 
     ";", "\[IndentingNewLine]", 
     RowBox[{"days", "=", 
      RowBox[{"Range", "[", 
       RowBox[{
        RowBox[{"dataRange", "[", 
         RowBox[{"[", "1", "]"}], "]"}], ",", 
        RowBox[{"dataRange", "[", 
         RowBox[{"[", "2", "]"}], "]"}]}], "]"}]}], ";", 
     "\[IndentingNewLine]", 
     RowBox[{"barChartPopDynMaskedFrames", "=", 
      RowBox[{"ParallelMap", "[", 
       RowBox[{
        RowBox[{
         RowBox[{"BarChartPopDynamicsMaskFrames", "[", 
          RowBox[{"fullRaster", ",", 
           RowBox[{"{", 
            RowBox[{"#", ",", "ticksMax"}], "}"}]}], "]"}], "&"}], ",", 
        "days"}], "]"}]}], ";", "\[IndentingNewLine]", 
     RowBox[{"ExportFrames", "[", 
      RowBox[{"barChartPopDynMaskedFrames", ",", "dataRange", ",", 
       RowBox[{"{", 
        RowBox[{"outputFolder", ",", "outputFlow", ",", "basePopDyn"}], 
        "}"}]}], "]"}], ";", "\[IndentingNewLine]", 
     RowBox[{"(*", 
      RowBox[{"Clear", " ", "Memory"}], "*)"}], "\[IndentingNewLine]", 
     RowBox[{"ClearSystemCache", "[", "]"}], ";", "\[IndentingNewLine]", 
     RowBox[{"Clear", "[", 
      RowBox[{
      "dataRange", ",", "subsetPopulations", ",", 
       "subsetPopulationsAccrossNodes", ",", "days", ",", 
       "barChartPopDynMaskedFrames"}], "]"}], ";"}], "\[IndentingNewLine]", 
    ",", 
    RowBox[{"{", 
     RowBox[{"i", ",", 
      RowBox[{"framesRange", "[", 
       RowBox[{"[", "1", "]"}], "]"}], ",", 
      RowBox[{
       RowBox[{"framesRange", "[", 
        RowBox[{"[", "2", "]"}], "]"}], "-", "stepSize"}], ",", "stepSize"}], 
     "}"}]}], "]"}], ";"}]}], "Input",
 CellChangeTimes->{{3.7286014613559647`*^9, 3.7286015475327587`*^9}, 
   3.728601582173761*^9, {3.7286030091212053`*^9, 3.728603018310872*^9}, {
   3.7286545710685253`*^9, 3.728654584732645*^9}, 3.728655002102021*^9, {
   3.7286699215875473`*^9, 3.728669923627376*^9}, {3.728853174204969*^9, 
   3.728853192297105*^9}, {3.728853269471661*^9, 3.728853274210744*^9}, {
   3.728931355848033*^9, 3.728931357666996*^9}, 3.728931453477345*^9, 
   3.7289402466039143`*^9},ExpressionUUID->"34597c70-9839-4123-846c-\
6d313032e21a"]
}, Closed]],

Cell[CellGroupData[{

Cell["Network", "Subchapter",
 CellChangeTimes->{{3.7286537204936934`*^9, 
  3.7286537231789093`*^9}},ExpressionUUID->"d2e81e1e-cd99-46f6-98b4-\
1ccb842191ff"],

Cell[BoxData[{
 RowBox[{
  RowBox[{"stepSize", "=", "4"}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"Table", "[", "\[IndentingNewLine]", 
   RowBox[{"(*", 
    RowBox[{"Subset", " ", "Data"}], "*)"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{
     RowBox[{"dataRange", "=", 
      RowBox[{"{", 
       RowBox[{"i", ",", 
        RowBox[{"i", "+", "stepSize"}]}], "}"}]}], ";", "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{"{", 
       RowBox[{"subsetPopulations", ",", "subsetPopulationsAccrossNodes"}], 
       "}"}], "=", 
      RowBox[{"SubsetPopulations", "[", 
       RowBox[{
        RowBox[{"{", 
         RowBox[{
         "aggregatedPopulations", ",", "aggregatedPopulationsAcrossNodes"}], 
         "}"}], ",", "dataRange"}], "]"}]}], ";", "\[IndentingNewLine]", 
     RowBox[{"(*", 
      RowBox[{"Export", " ", "Frames"}], "*)"}], "\[IndentingNewLine]", 
     RowBox[{"pieChartFrames", "=", 
      RowBox[{"ParallelMap", "[", 
       RowBox[{
        RowBox[{
         RowBox[{"GeneratePieChartsAtTick", "[", 
          RowBox[{"#", ",", "labels", ",", 
           RowBox[{"maleMax", "+", "femaleMax"}]}], "]"}], "&"}], ",", 
        "subsetPopulations"}], "]"}]}], ";", "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{"{", 
       RowBox[{"range", ",", "networkMatrix", ",", "vertexCoordinates"}], 
       "}"}], "=", 
      RowBox[{"CalculateNetworkParameters", "[", "cities", "]"}]}], ";", 
     "\[IndentingNewLine]", 
     RowBox[{"vertexShapeAndSizeFrames", "=", 
      RowBox[{"ParallelMap", "[", 
       RowBox[{
        RowBox[{
         RowBox[{"CalculateVertexScalers", "[", 
          RowBox[{
           RowBox[{"{", 
            RowBox[{"range", ",", "nodeScaler"}], "}"}], ",", "#"}], "]"}], 
         "&"}], ",", "pieChartFrames"}], "]"}]}], ";", "\[IndentingNewLine]", 
     
     RowBox[{"networkFrames", "=", 
      RowBox[{"ParallelMap", "[", 
       RowBox[{
        RowBox[{
         RowBox[{"GenerateNetworkFrames", "[", 
          RowBox[{"#", ",", 
           RowBox[{"{", 
            RowBox[{"vertexCoordinates", ",", "networkMatrix"}], "}"}], ",", 
           RowBox[{"{", 
            RowBox[{".075", ",", ".0005", ",", "frameDimensions"}], "}"}]}], 
          "]"}], "&"}], ",", "vertexShapeAndSizeFrames"}], "]"}]}], ";", 
     "\[IndentingNewLine]", 
     RowBox[{"ExportFrames", "[", 
      RowBox[{"networkFrames", ",", "dataRange", ",", 
       RowBox[{"{", 
        RowBox[{"outputFolder", ",", "outputNetworks", ",", "baseNetworks"}], 
        "}"}]}], "]"}], ";", "\[IndentingNewLine]", 
     RowBox[{"(*", 
      RowBox[{"Clear", " ", "Memory"}], "*)"}], "\[IndentingNewLine]", 
     RowBox[{"ClearSystemCache", "[", "]"}], ";", "\[IndentingNewLine]", 
     RowBox[{"Clear", "[", 
      RowBox[{
      "dataRange", ",", "subsetPopulations", ",", 
       "subsetPopulationsAccrossNodes", ",", "pieChartFrames", ",", 
       "vertexShapeAndSizeFrames", ",", "networkFrames", ",", "range", ",", 
       "networkMatrix", ",", "vertexCoordinates"}], "]"}], ";"}], 
    "\[IndentingNewLine]", ",", 
    RowBox[{"{", 
     RowBox[{"i", ",", 
      RowBox[{"framesRange", "[", 
       RowBox[{"[", "1", "]"}], "]"}], ",", 
      RowBox[{
       RowBox[{"framesRange", "[", 
        RowBox[{"[", "2", "]"}], "]"}], "-", "stepSize"}], ",", "stepSize"}], 
     "}"}]}], "]"}], ";"}]}], "Input",
 CellChangeTimes->{{3.7286608221304693`*^9, 3.7286608327910433`*^9}, {
   3.728660872408317*^9, 3.728660886912237*^9}, 3.728660927564033*^9, 
   3.728660970099587*^9, {3.728661058393159*^9, 3.728661153868289*^9}, {
   3.728661265767144*^9, 3.728661305710866*^9}, {3.728661375272917*^9, 
   3.728661382785262*^9}, {3.728662159094903*^9, 3.728662159346159*^9}, {
   3.7286752009759483`*^9, 3.728675201717708*^9}, {3.728675346650138*^9, 
   3.7286753495647087`*^9}, {3.728852536055922*^9, 3.728852555045615*^9}, {
   3.7288526277029667`*^9, 3.7288526333082113`*^9}, {3.728852852138495*^9, 
   3.7288529042710342`*^9}, {3.728853223160734*^9, 3.728853251019911*^9}, 
   3.7289276740161123`*^9, {3.728927740232855*^9, 3.728927746035223*^9}, {
   3.72893134573556*^9, 3.728931347865903*^9}, {3.728996281217606*^9, 
   3.7289962814623413`*^9}, {3.728996319965228*^9, 3.7289963221025457`*^9}, 
   3.728996528122198*^9, {3.7290034929467363`*^9, 3.729003509629693*^9}, {
   3.7290229090598373`*^9, 
   3.729022909140967*^9}},ExpressionUUID->"126e1323-2598-4a30-884b-\
d412a9dca2c8"]
}, Open  ]]
}, Open  ]],

Cell[CellGroupData[{

Cell["Final Frames", "Chapter",
 CellChangeTimes->{{3.7285676167386093`*^9, 3.728567624129726*^9}, {
  3.728604656437027*^9, 3.728604659363276*^9}, {3.728752269495276*^9, 
  3.7287522749613657`*^9}, {3.728847773730139*^9, 3.728847775204405*^9}, {
  3.728853201633174*^9, 
  3.728853201809606*^9}},ExpressionUUID->"0d6b19d6-74de-481f-8344-\
e3550bb74bb1"],

Cell[BoxData[{
 RowBox[{
  RowBox[{"stepSize", "=", "4"}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"Table", "[", "\[IndentingNewLine]", 
   RowBox[{"(*", 
    RowBox[{"Subset", " ", "Data"}], "*)"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{
     RowBox[{"dataRange", "=", 
      RowBox[{"{", 
       RowBox[{"i", ",", 
        RowBox[{"i", "+", "stepSize"}]}], "}"}]}], ";", "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{"{", 
       RowBox[{"subsetPopulations", ",", "subsetPopulationsAccrossNodes"}], 
       "}"}], "=", 
      RowBox[{"SubsetPopulations", "[", 
       RowBox[{
        RowBox[{"{", 
         RowBox[{
         "aggregatedPopulations", ",", "aggregatedPopulationsAcrossNodes"}], 
         "}"}], ",", "dataRange"}], "]"}]}], ";", "\[IndentingNewLine]", 
     RowBox[{"(*", 
      RowBox[{"Export", " ", "Frames"}], "*)"}], "\[IndentingNewLine]", 
     RowBox[{"fileNames", "=", 
      RowBox[{
       RowBox[{
        RowBox[{"ParseFilenames", "[", 
         RowBox[{"#", ",", "\[IndentingNewLine]", 
          RowBox[{"{", "\[IndentingNewLine]", 
           RowBox[{"outputFolder", ",", "\[IndentingNewLine]", 
            RowBox[{"{", 
             RowBox[{
             "outputPopCounts", ",", "outputBarCharts", ",", "outputFlow", 
              ",", "outputNetworks"}], "}"}], ",", "\[IndentingNewLine]", 
            RowBox[{"{", 
             RowBox[{
             "baseCounts", ",", "baseDays", ",", "baseBarCharts", ",", 
              "basePopDyn", ",", "baseNetworks"}], "}"}]}], 
           "\[IndentingNewLine]", "}"}]}], "]"}], "&"}], "/@", 
       RowBox[{"Range", "[", 
        RowBox[{
         RowBox[{"dataRange", "[", 
          RowBox[{"[", "1", "]"}], "]"}], ",", 
         RowBox[{"dataRange", "[", 
          RowBox[{"[", "2", "]"}], "]"}]}], "]"}]}]}], ";", 
     "\[IndentingNewLine]", 
     RowBox[{"fullFrames", "=", 
      RowBox[{"ParallelMap", "[", 
       RowBox[{
        RowBox[{
         RowBox[{"GenerateAnimationFrameFromFiles", "[", "#", "]"}], "&"}], 
        ",", "fileNames"}], "]"}]}], ";", "\[IndentingNewLine]", 
     RowBox[{"ExportFrames", "[", 
      RowBox[{"fullFrames", ",", "dataRange", ",", 
       RowBox[{"{", 
        RowBox[{
        "outputFolder", ",", "outputFullFrames", ",", "baseFullFrames"}], 
        "}"}]}], "]"}], ";", "\[IndentingNewLine]", 
     RowBox[{"(*", 
      RowBox[{"Clear", " ", "Memory"}], "*)"}], "\[IndentingNewLine]", 
     RowBox[{"ClearSystemCache", "[", "]"}], ";", "\[IndentingNewLine]", 
     RowBox[{"Clear", "[", 
      RowBox[{
      "dataRange", ",", "subsetPopulations", ",", 
       "subsetPopulationsAccrossNodes", ",", "fileNames", ",", "fullFrames"}],
       "]"}], ";"}], "\[IndentingNewLine]", ",", 
    RowBox[{"{", 
     RowBox[{"i", ",", 
      RowBox[{"framesRange", "[", 
       RowBox[{"[", "1", "]"}], "]"}], ",", 
      RowBox[{
       RowBox[{"framesRange", "[", 
        RowBox[{"[", "2", "]"}], "]"}], "-", "stepSize"}], ",", "stepSize"}], 
     "}"}]}], "]"}], ";"}]}], "Input",
 CellChangeTimes->{{3.728672908729183*^9, 3.7286729273401537`*^9}, {
   3.728672975994256*^9, 3.7286730204703617`*^9}, {3.728673091450292*^9, 
   3.728673118549974*^9}, {3.72867315609939*^9, 3.7286732120538893`*^9}, {
   3.728673494574224*^9, 3.728673499606791*^9}, {3.728847795436438*^9, 
   3.728847906088168*^9}, {3.728847965973672*^9, 3.728847986928347*^9}, {
   3.728848083272726*^9, 3.728848085390316*^9}, {3.728848115654953*^9, 
   3.728848143937195*^9}, {3.72884854459722*^9, 3.728848551923593*^9}, {
   3.728849202844892*^9, 3.728849203517215*^9}, {3.728849643063548*^9, 
   3.728849643192348*^9}, {3.728849677680154*^9, 3.728849677831018*^9}, {
   3.728851039827561*^9, 3.728851067774704*^9}, {3.728851427388193*^9, 
   3.728851456176692*^9}, {3.728851876353674*^9, 3.728851878316287*^9}, 
   3.728852525186387*^9, {3.7288526424931*^9, 3.728852653071982*^9}, {
   3.728852954636705*^9, 3.7288529731596203`*^9}, {3.728910118825944*^9, 
   3.7289101202725687`*^9}, {3.72900362861559*^9, 3.7290036347359343`*^9}, {
   3.729026789414238*^9, 
   3.729026789435341*^9}},ExpressionUUID->"1e873da9-668a-4057-8aa4-\
f3287192a010"]
}, Open  ]]
}, Open  ]]
},
WindowSize->{1064, 1367},
WindowMargins->{{0, Automatic}, {Automatic, 0}},
Magnification:>0.75 Inherited,
FrontEndVersion->"11.1 for Mac OS X x86 (32-bit, 64-bit Kernel) (April 27, \
2017)",
StyleDefinitions->"Default.nb"
]
(* End of Notebook Content *)

(* Internal cache information *)
(*CellTagsOutline
CellTagsIndex->{}
*)
(*CellTagsIndex
CellTagsIndex->{}
*)
(*NotebookFileOutline
Notebook[{
Cell[CellGroupData[{
Cell[580, 22, 195, 3, 70, "Title", "ExpressionUUID" -> \
"2ff85094-177f-4203-aeef-ae3a7082f034"],
Cell[CellGroupData[{
Cell[800, 29, 230, 4, 49, "Chapter", "ExpressionUUID" -> \
"245eba7d-e03d-4aa2-a830-5a1f00392c1f"],
Cell[1033, 35, 51832, 1276, 2314, "Input", "ExpressionUUID" -> \
"6bef33b5-033f-4d8b-aed7-63185bbfb214"]
}, Closed]],
Cell[CellGroupData[{
Cell[52902, 1316, 156, 3, 42, "Chapter", "ExpressionUUID" -> \
"82785af7-1316-4a9c-b0ab-a724d40fb99f"],
Cell[CellGroupData[{
Cell[53083, 1323, 13908, 271, 475, "Input", "ExpressionUUID" -> \
"eaf3faab-5169-4026-bc61-e73ab018b0be"],
Cell[66994, 1596, 1202, 35, 26, "Output", "ExpressionUUID" -> \
"72788881-3ba2-4519-9e77-aad7a08d664d"],
Cell[68199, 1633, 12690, 344, 26, "Output", "ExpressionUUID" -> \
"f3b01bdf-9691-47ee-ada0-d1cf6ccf5ef7"]
}, Open  ]]
}, Open  ]],
Cell[CellGroupData[{
Cell[80938, 1983, 161, 3, 49, "Chapter", "ExpressionUUID" -> \
"45127e10-12ed-4ded-8bb2-4057397293ab"],
Cell[CellGroupData[{
Cell[81124, 1990, 237, 4, 48, "Subchapter", "ExpressionUUID" -> \
"4b5b5dcb-6dc9-44a8-9a36-494a5a02d1fd"],
Cell[CellGroupData[{
Cell[81386, 1998, 1276, 31, 107, "Input", "ExpressionUUID" -> \
"342d9da7-35ba-4524-ae4f-d6162ef07f84"],
Cell[82665, 2031, 170, 3, 27, "Output", "ExpressionUUID" -> \
"fa6095aa-a479-4979-8c32-4704e675e6b5"]
}, Open  ]]
}, Closed]],
Cell[CellGroupData[{
Cell[82884, 2040, 163, 3, 37, "Subchapter", "ExpressionUUID" -> \
"211a5e2e-7f1a-4027-9073-d5f8139bee5d"],
Cell[83050, 2045, 4313, 105, 251, "Input", "ExpressionUUID" -> \
"ebbe4fd9-7958-48ef-851c-cfaad5883c7c"]
}, Closed]],
Cell[CellGroupData[{
Cell[87400, 2155, 159, 3, 37, "Subchapter", "ExpressionUUID" -> \
"4830739a-4c06-4add-bf62-c008ad9cb10b"],
Cell[87562, 2160, 2632, 64, 251, "Input", "ExpressionUUID" -> \
"08c719b5-3d7b-4620-88d7-93cbf336cb70"]
}, Closed]],
Cell[CellGroupData[{
Cell[90231, 2229, 167, 3, 37, "Subchapter", "ExpressionUUID" -> \
"2c88bc1c-b0f5-4663-8b04-04b16997ea2c"],
Cell[90401, 2234, 3159, 75, 235, "Input", "ExpressionUUID" -> \
"34597c70-9839-4123-846c-6d313032e21a"]
}, Closed]],
Cell[CellGroupData[{
Cell[93597, 2314, 159, 3, 37, "Subchapter", "ExpressionUUID" -> \
"d2e81e1e-cd99-46f6-98b4-1ccb842191ff"],
Cell[93759, 2319, 4434, 99, 267, "Input", "ExpressionUUID" -> \
"126e1323-2598-4a30-884b-d412a9dca2c8"]
}, Open  ]]
}, Open  ]],
Cell[CellGroupData[{
Cell[98242, 2424, 354, 6, 49, "Chapter", "ExpressionUUID" -> \
"0d6b19d6-74de-481f-8344-e3550bb74bb1"],
Cell[98599, 2432, 4165, 92, 299, "Input", "ExpressionUUID" -> \
"1e873da9-668a-4057-8aa4-f3287192a010"]
}, Open  ]]
}, Open  ]]
}
]
*)

